<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
	<meta name="theme-color" content="#33474d">
	<title>Hexo</title>
	<link rel="stylesheet" href="/css/style.css" />
	
      <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
    
<meta name="generator" content="Hexo 6.2.0"></head>

<body>

	<header class="header">
		<nav class="header__nav">
			
				<a href="/archives" class="header__link">Archive</a>
			
				<a href="/tags" class="header__link">Tags</a>
			
				<a href="/atom.xml" class="header__link">RSS</a>
			
		</nav>
		<h1 class="header__title"><a href="/">Hexo</a></h1>
		<h2 class="header__subtitle"></h2>
	</header>

	<main>
		



	<article>
	
		<h1><a href="/2022/05/25/Spark-HA-Yarn/">Spark HA &amp; Yarné…ç½®</a></h1>
	
	<div class="article__infos">
		<span class="article__date">2022-05-25</span><br />
		
		
			<span class="article__tags">
			  	<a class="article__tag-none-link" href="/tags/spark/" rel="tag">spark</a>
			</span>
		
	</div>

	

	
		<p>Welcome to visit!ğŸ¥° If there is any incorrect place in this article, you are welcome to correct it. Beginner onlyğŸ˜</p>
<h2 id="Spark-On-YARNæ¨¡å¼"><a href="#Spark-On-YARNæ¨¡å¼" class="headerlink" title="Spark On YARNæ¨¡å¼"></a>Spark On YARNæ¨¡å¼</h2><p>åœ¨å·²æœ‰YARNé›†ç¾¤çš„å‰æä¸‹åœ¨å•ç‹¬å‡†å¤‡Spark StandAloneé›†ç¾¤,å¯¹èµ„æºçš„åˆ©ç”¨å°±ä¸é«˜.Spark On YARN, æ—  éœ€éƒ¨ç½²Sparké›†ç¾¤, åªè¦æ‰¾ä¸€å°æœåŠ¡å™¨, å……å½“Sparkçš„å®¢æˆ·ç«¯</p>
<h3 id="ä¿è¯-HADOOP-CONF-å’Œ-DIR-YARN-CONF-DIR-å·²ç»é…ç½®åœ¨spark-env-sh-å’Œç¯å¢ƒå˜é‡ä¸­-ï¼ˆæ³¨-å‰é¢é…ç½®spark-Standlone-æ—¶å·²ç»é…ç½®è¿‡æ­¤é¡¹äº†ï¼‰"><a href="#ä¿è¯-HADOOP-CONF-å’Œ-DIR-YARN-CONF-DIR-å·²ç»é…ç½®åœ¨spark-env-sh-å’Œç¯å¢ƒå˜é‡ä¸­-ï¼ˆæ³¨-å‰é¢é…ç½®spark-Standlone-æ—¶å·²ç»é…ç½®è¿‡æ­¤é¡¹äº†ï¼‰" class="headerlink" title="ä¿è¯ HADOOP_CONF_å’Œ DIR_YARN_CONF_DIR å·²ç»é…ç½®åœ¨spark-env.sh å’Œç¯å¢ƒå˜é‡ä¸­ ï¼ˆæ³¨: å‰é¢é…ç½®spark-Standlone æ—¶å·²ç»é…ç½®è¿‡æ­¤é¡¹äº†ï¼‰"></a>ä¿è¯ HADOOP_CONF_å’Œ DIR_YARN_CONF_DIR å·²ç»é…ç½®åœ¨spark-env.sh å’Œç¯å¢ƒå˜é‡ä¸­ ï¼ˆæ³¨: å‰é¢é…ç½®spark-Standlone æ—¶å·²ç»é…ç½®è¿‡æ­¤é¡¹äº†ï¼‰</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">spark-env.sh æ–‡ä»¶éƒ¨åˆ†æ˜¾ç¤ºï¼š</span><br><span class="line">....</span><br><span class="line">77 ## HADOOPè½¯ä»¶é…ç½®æ–‡ä»¶ç›®å½•ï¼Œè¯»å–HDFSä¸Šæ–‡ä»¶å’Œè¿è¡ŒYARNé›†ç¾¤</span><br><span class="line">78 HADOOP_CONF_DIR=/export/server/hadoop/etc/hadoop</span><br><span class="line">79 YARN_CONF_DIR=/export/server/hadoop/etc/hadoop</span><br><span class="line">....</span><br></pre></td></tr></table></figure>

<h3 id="é“¾æ¥åˆ°-YARN-ä¸­ï¼ˆæ³¨-äº¤äº’å¼ç¯å¢ƒ-pyspark-å’Œ-spark-shell-æ— æ³•è¿è¡Œ-clusteræ¨¡å¼ï¼‰"><a href="#é“¾æ¥åˆ°-YARN-ä¸­ï¼ˆæ³¨-äº¤äº’å¼ç¯å¢ƒ-pyspark-å’Œ-spark-shell-æ— æ³•è¿è¡Œ-clusteræ¨¡å¼ï¼‰" class="headerlink" title="é“¾æ¥åˆ° YARN ä¸­ï¼ˆæ³¨: äº¤äº’å¼ç¯å¢ƒ pyspark å’Œ spark-shell æ— æ³•è¿è¡Œ clusteræ¨¡å¼ï¼‰"></a>é“¾æ¥åˆ° YARN ä¸­ï¼ˆæ³¨: äº¤äº’å¼ç¯å¢ƒ pyspark å’Œ spark-shell æ— æ³•è¿è¡Œ clusteræ¨¡å¼ï¼‰</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">bin/pyspark --master yarn --deploy-mode client|cluster</span><br><span class="line"># --deploy-mode é€‰é¡¹æ˜¯æŒ‡å®šéƒ¨ç½²æ¨¡å¼, é»˜è®¤æ˜¯ å®¢æˆ·ç«¯æ¨¡å¼</span><br><span class="line"># clientå°±æ˜¯å®¢æˆ·ç«¯æ¨¡å¼</span><br><span class="line"># clusterå°±æ˜¯é›†ç¾¤æ¨¡å¼</span><br><span class="line"># --deploy-mode ä»…å¯ä»¥ç”¨åœ¨YARNæ¨¡å¼ä¸‹</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bin/spark-shell --master yarn --deploy-mode client|cluster</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">bin/spark-submit --master yarn --deploy-mode client|cluster /xxx/xxx/xxx.py</span><br><span class="line">å‚æ•°</span><br></pre></td></tr></table></figure>

<h3 id="spark-submit-å’Œ-spark-shell-å’Œ-pysparkçš„ç›¸å…³å‚æ•°"><a href="#spark-submit-å’Œ-spark-shell-å’Œ-pysparkçš„ç›¸å…³å‚æ•°" class="headerlink" title="spark-submit å’Œ spark-shell å’Œ pysparkçš„ç›¸å…³å‚æ•°"></a>spark-submit å’Œ spark-shell å’Œ pysparkçš„ç›¸å…³å‚æ•°</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">- bin/pyspark: pysparkè§£é‡Šå™¨sparkç¯å¢ƒ</span><br><span class="line">- bin/spark-shell: scalaè§£é‡Šå™¨sparkç¯å¢ƒ</span><br><span class="line">- bin/spark-submit: æäº¤jaråŒ…æˆ–Pythonæ–‡ä»¶æ‰§è¡Œçš„å·¥å…·</span><br><span class="line">- bin/spark-sql: sparksqlå®¢æˆ·ç«¯å·¥å…·</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">è¿™4ä¸ªå®¢æˆ·ç«¯å·¥å…·çš„å‚æ•°åŸºæœ¬é€šç”¨.ä»¥spark-submit ä¸ºä¾‹:</span><br><span class="line">bin/spark-submit --master spark://master:7077 xxx.py`</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line">Usage: spark-submit [options] &lt;app jar | python file | R file&gt; [app</span><br><span class="line">arguments]</span><br><span class="line">Usage: spark-submit --kill [submission ID] --master [spark://...]</span><br><span class="line">Usage: spark-submit --status [submission ID] --master [spark://...]</span><br><span class="line">Usage: spark-submit run-example [options] example-class [example args]</span><br><span class="line">Options:</span><br><span class="line">--master MASTER_URL spark://host:port, mesos://host:port, yarn,</span><br><span class="line">k8s://https://host:port, or local (Default:</span><br><span class="line">local[*]).</span><br><span class="line">--deploy-mode DEPLOY_MODE éƒ¨ç½²æ¨¡å¼ client æˆ–è€… cluster é»˜è®¤æ˜¯client</span><br><span class="line">--class CLASS_NAME è¿è¡Œjavaæˆ–è€…scala class(for Java / Scala apps).</span><br><span class="line">--name NAME ç¨‹åºçš„åå­—</span><br><span class="line">--jars JARS Comma-separated list of jars to include on the</span><br><span class="line">driver</span><br><span class="line">and executor classpaths.</span><br><span class="line">--packages Comma-separated list of maven coordinates of</span><br><span class="line">jars to include</span><br><span class="line">on the driver and executor classpaths. Will</span><br><span class="line">search the local</span><br><span class="line">maven repo, then maven central and any</span><br><span class="line">additional remote</span><br><span class="line">repositories given by --repositories. The</span><br><span class="line">format for the</span><br><span class="line">coordinates should be</span><br><span class="line">groupId:artifactId:version.</span><br><span class="line">--exclude-packages Comma-separated list of groupId:artifactId, to</span><br><span class="line">exclude while</span><br><span class="line">resolving the dependencies provided in --</span><br><span class="line">packages to avoid</span><br><span class="line">dependency conflicts.</span><br><span class="line">--repositories Comma-separated list of additional remote</span><br><span class="line">repositories to</span><br><span class="line">search for the maven coordinates given with --</span><br><span class="line">packages.</span><br><span class="line">--py-files PY_FILES æŒ‡å®šPythonç¨‹åºä¾èµ–çš„å…¶å®ƒpythonæ–‡ä»¶</span><br><span class="line">--files FILES Comma-separated list of files to be placed in</span><br><span class="line">the working</span><br><span class="line">directory of each executor. File paths of</span><br><span class="line">these files</span><br><span class="line">in executors can be accessed via</span><br><span class="line">SparkFiles.get(fileName).</span><br><span class="line">--archives ARCHIVES Comma-separated list of archives to be</span><br><span class="line">extracted into the</span><br><span class="line">working directory of each executor.</span><br><span class="line">--conf, -c PROP=VALUE æ‰‹åŠ¨æŒ‡å®šé…ç½®</span><br><span class="line">--properties-file FILE Path to a file from which to load extra</span><br><span class="line">properties. If not</span><br><span class="line">specified, this will look for conf/sparkdefaults.conf.</span><br><span class="line">--driver-memory MEM Driverçš„å¯ç”¨å†…å­˜(Default: 1024M).</span><br><span class="line">--driver-java-options Driverçš„ä¸€äº›Javaé€‰é¡¹</span><br><span class="line">--driver-library-path Extra library path entries to pass to the</span><br><span class="line">driver.</span><br><span class="line">--driver-class-path Extra class path entries to pass to the</span><br><span class="line">driver. Note that</span><br><span class="line">jars added with --jars are automatically</span><br><span class="line">included in the</span><br><span class="line">classpath.</span><br><span class="line">--executor-memory MEM Executorçš„å†…å­˜ (Default: 1G).</span><br><span class="line">--proxy-user NAME User to impersonate when submitting the</span><br><span class="line">application.</span><br><span class="line">This argument does not work with --principal /</span><br><span class="line">--keytab.</span><br><span class="line">--help, -h æ˜¾ç¤ºå¸®åŠ©æ–‡ä»¶</span><br><span class="line">--verbose, -v Print additional debug output.</span><br><span class="line">--version, æ‰“å°ç‰ˆæœ¬</span><br><span class="line">Cluster deploy mode only(é›†ç¾¤æ¨¡å¼ä¸“å±):</span><br><span class="line">--driver-cores NUM Driverå¯ç”¨çš„çš„CPUæ ¸æ•°(Default: 1).</span><br><span class="line">Spark standalone or Mesos with cluster deploy mode only:</span><br><span class="line">--supervise å¦‚æœç»™å®š, å¯ä»¥å°è¯•é‡å¯Driver</span><br><span class="line">Spark standalone, Mesos or K8s with cluster deploy mode only:</span><br><span class="line">--kill SUBMISSION_ID æŒ‡å®šç¨‹åºID kill</span><br><span class="line">--status SUBMISSION_ID æŒ‡å®šç¨‹åºID æŸ¥çœ‹è¿è¡ŒçŠ¶æ€</span><br><span class="line">Spark standalone, Mesos and Kubernetes only:</span><br><span class="line">--total-executor-cores NUM æ•´ä¸ªä»»åŠ¡å¯ä»¥ç»™Executorå¤šå°‘ä¸ªCPUæ ¸å¿ƒç”¨</span><br><span class="line">Spark standalone, YARN and Kubernetes only:</span><br><span class="line">--executor-cores NUM å•ä¸ªExecutorèƒ½ä½¿ç”¨å¤šå°‘CPUæ ¸å¿ƒ</span><br><span class="line">Spark on YARN and Kubernetes only(YARNæ¨¡å¼ä¸‹):</span><br><span class="line">--num-executors NUM Executoråº”è¯¥å¼€å¯å‡ ä¸ª</span><br><span class="line">--principal PRINCIPAL Principal to be used to login to KDC.</span><br><span class="line">--keytab KEYTAB The full path to the file that contains the</span><br><span class="line">keytab for the</span><br><span class="line">principal specified above.</span><br><span class="line">Spark on YARN only:</span><br><span class="line">--queue QUEUE_NAME æŒ‡å®šè¿è¡Œçš„YARNé˜Ÿåˆ—(Default: &quot;default&quot;).</span><br></pre></td></tr></table></figure>

<h3 id="å¯åŠ¨-YARN-çš„å†å²æœåŠ¡å™¨"><a href="#å¯åŠ¨-YARN-çš„å†å²æœåŠ¡å™¨" class="headerlink" title="å¯åŠ¨ YARN çš„å†å²æœåŠ¡å™¨"></a>å¯åŠ¨ YARN çš„å†å²æœåŠ¡å™¨</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd /export/server/hadoop-3.3.0/sbin</span><br><span class="line">./mr-jobhistory-daemon.sh start historyserver</span><br></pre></td></tr></table></figure>

<h3 id="è®¿é—®WebUIç•Œé¢"><a href="#è®¿é—®WebUIç•Œé¢" class="headerlink" title="è®¿é—®WebUIç•Œé¢"></a>è®¿é—®WebUIç•Œé¢</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://master:19888/</span><br></pre></td></tr></table></figure>

<h3 id="client-æ¨¡å¼æµ‹è¯•"><a href="#client-æ¨¡å¼æµ‹è¯•" class="headerlink" title="client æ¨¡å¼æµ‹è¯•"></a>client æ¨¡å¼æµ‹è¯•</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SPARK_HOME=/export/server/spark</span><br><span class="line">$&#123;SPARK_HOME&#125;/bin/spark-submit --master yarn --deploy-mode client --</span><br><span class="line">driver-memory 512m --executor-memory 512m --num-executors 1 --totalexecutor-cores 2 $&#123;SPARK_HOME&#125;/examples/src/main/python/pi.py 3</span><br></pre></td></tr></table></figure>

<h3 id="cluster-æ¨¡å¼æµ‹è¯•"><a href="#cluster-æ¨¡å¼æµ‹è¯•" class="headerlink" title="cluster æ¨¡å¼æµ‹è¯•"></a>cluster æ¨¡å¼æµ‹è¯•</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">SPARK_HOME=/export/server/spark</span><br><span class="line">$&#123;SPARK_HOME&#125;/bin/spark-submit --master yarn --deploy-mode cluster --driver-memory 512m --executor-memory 512m --num-executors 1 --total-executor-cores</span><br><span class="line">2 --conf &quot;spark.pyspark.driver.python=/root/anaconda3/bin/python3&quot; --conf</span><br><span class="line">&quot;spark.pyspark.python=/root/anaconda3/bin/python3&quot;</span><br><span class="line">$&#123;SPARK_HOME&#125;/examples/src/main/python/pi.py 3</span><br></pre></td></tr></table></figure>



<p>Author: Chen Qingtao<br>Email: <a href="mailto:&#x31;&#53;&#49;&#52;&#x33;&#55;&#x39;&#x39;&#x30;&#x38;&#53;&#64;&#x71;&#x71;&#46;&#99;&#x6f;&#109;">&#x31;&#53;&#49;&#52;&#x33;&#55;&#x39;&#x39;&#x30;&#x38;&#53;&#64;&#x71;&#x71;&#46;&#99;&#x6f;&#109;</a></p>

	

	

</article>




	<article>
	
		<h1><a href="/2022/05/25/Spark-local-stand-alone/">Spark local&amp; stand-aloneé…ç½®</a></h1>
	
	<div class="article__infos">
		<span class="article__date">2022-05-25</span><br />
		
		
			<span class="article__tags">
			  	<a class="article__tag-none-link" href="/tags/spark/" rel="tag">spark</a>
			</span>
		
	</div>

	

	
		<p>Welcome to visit!ğŸ¥° If there is any incorrect place in this article, you are welcome to correct it. Beginner onlyğŸ˜</p>
<h2 id="Sparkå®‰è£…é…ç½®"><a href="#Sparkå®‰è£…é…ç½®" class="headerlink" title="Sparkå®‰è£…é…ç½®"></a>Sparkå®‰è£…é…ç½®</h2><h3 id="Spark-localæ¨¡å¼"><a href="#Spark-localæ¨¡å¼" class="headerlink" title="Spark-localæ¨¡å¼"></a>Spark-localæ¨¡å¼</h3><h4 id="Anaconda-On-Linux-å®‰è£…-å•å°æœåŠ¡å™¨è„šæœ¬å®‰è£…"><a href="#Anaconda-On-Linux-å®‰è£…-å•å°æœåŠ¡å™¨è„šæœ¬å®‰è£…" class="headerlink" title="Anaconda On Linux å®‰è£… (å•å°æœåŠ¡å™¨è„šæœ¬å®‰è£…)"></a>Anaconda On Linux å®‰è£… (å•å°æœåŠ¡å™¨è„šæœ¬å®‰è£…)</h4><h4 id="å®‰è£…ä¸Šä¼ å®‰è£…åŒ…-èµ„æ–™ä¸­æä¾›çš„Anaconda3-2021-05-Linux-x86-64-shæ–‡ä»¶åˆ°LinuxæœåŠ¡å™¨ä¸Šå®‰è£…-ä½ç½®åœ¨-x2F-export-x2F-server"><a href="#å®‰è£…ä¸Šä¼ å®‰è£…åŒ…-èµ„æ–™ä¸­æä¾›çš„Anaconda3-2021-05-Linux-x86-64-shæ–‡ä»¶åˆ°LinuxæœåŠ¡å™¨ä¸Šå®‰è£…-ä½ç½®åœ¨-x2F-export-x2F-server" class="headerlink" title="å®‰è£…ä¸Šä¼ å®‰è£…åŒ…: èµ„æ–™ä¸­æä¾›çš„Anaconda3-2021.05-Linux-x86_64.shæ–‡ä»¶åˆ°LinuxæœåŠ¡å™¨ä¸Šå®‰è£… ä½ç½®åœ¨ &#x2F;export&#x2F;server"></a>å®‰è£…ä¸Šä¼ å®‰è£…åŒ…: èµ„æ–™ä¸­æä¾›çš„Anaconda3-2021.05-Linux-x86_64.shæ–‡ä»¶åˆ°LinuxæœåŠ¡å™¨ä¸Šå®‰è£… ä½ç½®åœ¨ &#x2F;export&#x2F;server</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cd /export/server</span><br><span class="line"># è¿è¡Œæ–‡ä»¶</span><br><span class="line">sh Anaconda3-2021.05-Linux-x86_64.sh</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">è¿‡ç¨‹æ˜¾ç¤ºï¼š</span><br><span class="line">...</span><br><span class="line"># å‡ºç°å†…å®¹é€‰ yes</span><br><span class="line">Please answer &#x27;yes&#x27; or &#x27;no&#x27;:&#x27;</span><br><span class="line">&gt;&gt;&gt; yes</span><br><span class="line">...</span><br><span class="line"># å‡ºç°æ·»åŠ è·¯å¾„ï¼š/export/server/anaconda3</span><br><span class="line">...</span><br><span class="line">[/root/anaconda3] &gt;&gt;&gt; /export/server/anaconda3</span><br><span class="line">PREFIX=/export/server/anaconda3</span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<h4 id="å®‰è£…å®Œæˆå-é€€å‡ºç»ˆç«¯ï¼Œ-é‡æ–°è¿›æ¥"><a href="#å®‰è£…å®Œæˆå-é€€å‡ºç»ˆç«¯ï¼Œ-é‡æ–°è¿›æ¥" class="headerlink" title="å®‰è£…å®Œæˆå, é€€å‡ºç»ˆç«¯ï¼Œ é‡æ–°è¿›æ¥"></a>å®‰è£…å®Œæˆå, é€€å‡ºç»ˆç«¯ï¼Œ é‡æ–°è¿›æ¥</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">exit</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ç»“æœæ˜¾ç¤ºï¼š</span><br><span class="line"># çœ‹åˆ°è¿™ä¸ªBaseå¼€å¤´è¡¨æ˜å®‰è£…å¥½äº†.baseæ˜¯é»˜è®¤çš„è™šæ‹Ÿç¯å¢ƒ.</span><br><span class="line">Last login: Tue Mar 15 15:28:59 2022 from 192.168.88.1</span><br><span class="line">(base) [root@master ~]#</span><br></pre></td></tr></table></figure>

<h4 id="åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ-pyspark-åŸºäº-python3-8"><a href="#åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ-pyspark-åŸºäº-python3-8" class="headerlink" title="åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ pyspark åŸºäº python3.8"></a>åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ pyspark åŸºäº python3.8</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">conda create -n pyspark python=3.8</span><br></pre></td></tr></table></figure>

<h4 id="åˆ‡æ¢åˆ°è™šæ‹Ÿç¯å¢ƒå†…"><a href="#åˆ‡æ¢åˆ°è™šæ‹Ÿç¯å¢ƒå†…" class="headerlink" title="åˆ‡æ¢åˆ°è™šæ‹Ÿç¯å¢ƒå†…"></a>åˆ‡æ¢åˆ°è™šæ‹Ÿç¯å¢ƒå†…</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">conda activate pyspark</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ç»“æœæ˜¾ç¤ºï¼š</span><br><span class="line">(base) [root@master ~]# conda activate pyspark</span><br><span class="line">(pyspark) [root@master ~]#</span><br></pre></td></tr></table></figure>

<h4 id="åœ¨è™šæ‹Ÿç¯å¢ƒå†…å®‰è£…åŒ…-ï¼ˆæœ‰WARNINGä¸ç”¨ç®¡ï¼‰"><a href="#åœ¨è™šæ‹Ÿç¯å¢ƒå†…å®‰è£…åŒ…-ï¼ˆæœ‰WARNINGä¸ç”¨ç®¡ï¼‰" class="headerlink" title="åœ¨è™šæ‹Ÿç¯å¢ƒå†…å®‰è£…åŒ… ï¼ˆæœ‰WARNINGä¸ç”¨ç®¡ï¼‰"></a>åœ¨è™šæ‹Ÿç¯å¢ƒå†…å®‰è£…åŒ… ï¼ˆæœ‰WARNINGä¸ç”¨ç®¡ï¼‰</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install pyhive pyspark jieba -i https://pypi.tuna.tsinghua.edu.cn/simple</span><br></pre></td></tr></table></figure>

<h4 id="spark-å®‰è£…"><a href="#spark-å®‰è£…" class="headerlink" title="spark å®‰è£…"></a>spark å®‰è£…</h4><h4 id="å°†æ–‡ä»¶ä¸Šä¼ åˆ°-x2F-export-x2F-server-é‡Œé¢-ï¼Œè§£å‹"><a href="#å°†æ–‡ä»¶ä¸Šä¼ åˆ°-x2F-export-x2F-server-é‡Œé¢-ï¼Œè§£å‹" class="headerlink" title="å°†æ–‡ä»¶ä¸Šä¼ åˆ° &#x2F;export&#x2F;server é‡Œé¢ ï¼Œè§£å‹"></a>å°†æ–‡ä»¶ä¸Šä¼ åˆ° &#x2F;export&#x2F;server é‡Œé¢ ï¼Œè§£å‹</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cd /export/server</span><br><span class="line"># è§£å‹</span><br><span class="line">tar -zxvf spark-3.2.0-bin-hadoop3.2.tgz -C /export/server/</span><br></pre></td></tr></table></figure>

<h4 id="å»ºç«‹è½¯è¿æ¥"><a href="#å»ºç«‹è½¯è¿æ¥" class="headerlink" title="å»ºç«‹è½¯è¿æ¥"></a>å»ºç«‹è½¯è¿æ¥</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ln -s /export/server/spark-3.2.0-bin-hadoop3.2 /export/server/spark</span><br></pre></td></tr></table></figure>

<h4 id="æ·»åŠ ç¯å¢ƒå˜é‡"><a href="#æ·»åŠ ç¯å¢ƒå˜é‡" class="headerlink" title="æ·»åŠ ç¯å¢ƒå˜é‡"></a>æ·»åŠ ç¯å¢ƒå˜é‡</h4><p>SPARK_HOME: è¡¨ç¤ºSparkå®‰è£…è·¯å¾„åœ¨å“ªé‡Œ </p>
<p>PYSPARK_PYTHON: è¡¨ç¤ºSparkæƒ³è¿è¡ŒPythonç¨‹åº, é‚£ä¹ˆå»å“ªé‡Œæ‰¾pythonæ‰§è¡Œå™¨ </p>
<p>JAVA_HOME: å‘ŠçŸ¥Spark Javaåœ¨å“ªé‡Œ </p>
<p>HADOOP_CONF_DIR: å‘ŠçŸ¥Spark Hadoopçš„é…ç½®æ–‡ä»¶åœ¨å“ªé‡Œ </p>
<p>HADOOP_HOME: å‘ŠçŸ¥Spark Hadoopå®‰è£…åœ¨å“ªé‡Œ</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/profile</span><br><span class="line">å†…å®¹ï¼š</span><br><span class="line">.....</span><br><span class="line">æ³¨ï¼šæ­¤éƒ¨åˆ†ä¹‹å‰é…ç½®è¿‡ï¼Œæ­¤éƒ¨åˆ†ä¸éœ€è¦åœ¨é…ç½®</span><br><span class="line">#JAVA_HOME</span><br><span class="line">export JAVA_HOME=/export/server/jdk1.8.0_241</span><br><span class="line">export PATH=$PATH:$JAVA_HOME/bin</span><br><span class="line">export CLASSPATH=.:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar</span><br><span class="line">#HADOOP_HOME</span><br><span class="line">export HADOOP_HOME=/export/server/hadoop-3.3.0</span><br><span class="line">export PATH=$PATH:$HADOOP_HOME/bin:$HADOOP_HOME/sbin</span><br><span class="line">#ZOOKEEPER_HOME</span><br><span class="line">export ZOOKEEPER_HOME=/export/server/zookeeper</span><br><span class="line">export PATH=$PATH:$ZOOKEEPER_HOME/bin</span><br><span class="line">.....</span><br><span class="line"># å°†ä»¥ä¸‹éƒ¨åˆ†æ·»åŠ è¿›å»</span><br><span class="line">#SPARK_HOME</span><br><span class="line">export SPARK_HOME=/export/server/spark</span><br><span class="line">#HADOOP_CONF_DIR</span><br><span class="line">export HADOOP_CONF_DIR=$HADOOP_HOME/etc/hadoop</span><br><span class="line">#PYSPARK_PYTHON</span><br><span class="line">export PYSPARK_PYTHON=/export/server/anaconda3/envs/pyspark/bin/python</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">vim .bashrc</span><br><span class="line">å†…å®¹æ·»åŠ è¿›å»ï¼š</span><br><span class="line">#JAVA_HOME</span><br><span class="line">export JAVA_HOME=/export/server/jdk1.8.0_241</span><br><span class="line">#PYSPARK_PYTHON</span><br><span class="line">export PYSPARK_PYTHON=/export/server/anaconda3/envs/pyspark/bin/python</span><br></pre></td></tr></table></figure>

<h4 id="é‡æ–°åŠ è½½ç¯å¢ƒå˜é‡æ–‡ä»¶"><a href="#é‡æ–°åŠ è½½ç¯å¢ƒå˜é‡æ–‡ä»¶" class="headerlink" title="é‡æ–°åŠ è½½ç¯å¢ƒå˜é‡æ–‡ä»¶"></a>é‡æ–°åŠ è½½ç¯å¢ƒå˜é‡æ–‡ä»¶</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">source /etc/profile</span><br><span class="line">source ~/.bashrc</span><br></pre></td></tr></table></figure>

<h4 id="è¿›å…¥-x2F-export-x2F-server-x2F-anaconda3-x2F-envs-x2F-pyspark-x2F-bin-x2F-æ–‡ä»¶å¤¹"><a href="#è¿›å…¥-x2F-export-x2F-server-x2F-anaconda3-x2F-envs-x2F-pyspark-x2F-bin-x2F-æ–‡ä»¶å¤¹" class="headerlink" title="è¿›å…¥ &#x2F;export&#x2F;server&#x2F;anaconda3&#x2F;envs&#x2F;pyspark&#x2F;bin&#x2F; æ–‡ä»¶å¤¹"></a>è¿›å…¥ &#x2F;export&#x2F;server&#x2F;anaconda3&#x2F;envs&#x2F;pyspark&#x2F;bin&#x2F; æ–‡ä»¶å¤¹</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd /export/server/anaconda3/envs/pyspark/bin/</span><br></pre></td></tr></table></figure>

<h4 id="å¼€å¯"><a href="#å¼€å¯" class="headerlink" title="å¼€å¯"></a>å¼€å¯</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./pyspark</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">ç»“æœæ˜¾ç¤ºï¼š</span><br><span class="line">(base) [root@master bin]# ./pyspark</span><br><span class="line">Python 3.8.12 (default, Oct 12 2021, 13:49:34)</span><br><span class="line">[GCC 7.5.0] :: Anaconda, Inc. on linux</span><br><span class="line">Type &quot;help&quot;, &quot;copyright&quot;, &quot;credits&quot; or &quot;license&quot; for more information.</span><br><span class="line">Setting default log level to &quot;WARN&quot;.</span><br><span class="line">To adjust logging level use sc.setLogLevel(newLevel). For SparkR, use</span><br><span class="line">setLogLevel(newLevel).</span><br><span class="line">2022-03-15 20:37:04,612 WARN util.NativeCodeLoader: Unable to load nativehadoop library for your platform... using builtin-java classes where</span><br><span class="line">applicable</span><br><span class="line">Welcome to</span><br><span class="line">____ __</span><br><span class="line">/ __/__ ___ _____/ /__</span><br><span class="line">_\ \/ _ \/ _ `/ __/ &#x27;_/</span><br><span class="line">/__ / .__/\_,_/_/ /_/\_\ version 3.2.0</span><br><span class="line">/_/</span><br><span class="line">Using Python version 3.8.12 (default, Oct 12 2021 13:49:34)</span><br><span class="line">Spark context Web UI available at http://master:4040</span><br><span class="line">Spark context available as &#x27;sc&#x27; (master = local[*], app id = local1647347826262).</span><br><span class="line">SparkSession available as &#x27;spark&#x27;.</span><br><span class="line">&gt;&gt;&gt;</span><br></pre></td></tr></table></figure>

<h4 id="æŸ¥çœ‹WebUIç•Œé¢"><a href="#æŸ¥çœ‹WebUIç•Œé¢" class="headerlink" title="æŸ¥çœ‹WebUIç•Œé¢"></a>æŸ¥çœ‹WebUIç•Œé¢</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">æµè§ˆå™¨è®¿é—®ï¼š</span><br><span class="line">http://master:4040/</span><br></pre></td></tr></table></figure>

<h4 id="é€€å‡º"><a href="#é€€å‡º" class="headerlink" title="é€€å‡º"></a>é€€å‡º</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">conda deactivate</span><br></pre></td></tr></table></figure>

<h3 id="Spark-Standaloneæ¨¡å¼"><a href="#Spark-Standaloneæ¨¡å¼" class="headerlink" title="Spark-Standaloneæ¨¡å¼"></a>Spark-Standaloneæ¨¡å¼</h3><p>Standaloneæ¨¡å¼(é›†ç¾¤) Sparkä¸­çš„å„ä¸ªè§’è‰²ä»¥ç‹¬ç«‹è¿›ç¨‹çš„å½¢å¼å­˜åœ¨,å¹¶ç»„æˆSparké›†ç¾¤ç¯å¢ƒ</p>
<h4 id="Anaconda-On-Linux-å®‰è£…-å•å°æœåŠ¡å™¨è„šæœ¬å®‰è£…-æ³¨ï¼šåœ¨-slave1-å’Œ-slave2-ä¸Šéƒ¨ç½²"><a href="#Anaconda-On-Linux-å®‰è£…-å•å°æœåŠ¡å™¨è„šæœ¬å®‰è£…-æ³¨ï¼šåœ¨-slave1-å’Œ-slave2-ä¸Šéƒ¨ç½²" class="headerlink" title="Anaconda On Linux å®‰è£… (å•å°æœåŠ¡å™¨è„šæœ¬å®‰è£… æ³¨ï¼šåœ¨ slave1 å’Œ slave2 ä¸Šéƒ¨ç½²)"></a>Anaconda On Linux å®‰è£… (å•å°æœåŠ¡å™¨è„šæœ¬å®‰è£… æ³¨ï¼šåœ¨ slave1 å’Œ slave2 ä¸Šéƒ¨ç½²)</h4><h4 id="å®‰è£…ä¸Šä¼ å®‰è£…åŒ…-èµ„æ–™ä¸­æä¾›çš„Anaconda3-2021-05-Linux-x86-64-shæ–‡ä»¶åˆ°LinuxæœåŠ¡å™¨ä¸Šå®‰è£…-ä½ç½®åœ¨-x2F-export-x2F-server-1"><a href="#å®‰è£…ä¸Šä¼ å®‰è£…åŒ…-èµ„æ–™ä¸­æä¾›çš„Anaconda3-2021-05-Linux-x86-64-shæ–‡ä»¶åˆ°LinuxæœåŠ¡å™¨ä¸Šå®‰è£…-ä½ç½®åœ¨-x2F-export-x2F-server-1" class="headerlink" title="å®‰è£…ä¸Šä¼ å®‰è£…åŒ…: èµ„æ–™ä¸­æä¾›çš„Anaconda3-2021.05-Linux-x86_64.shæ–‡ä»¶åˆ°LinuxæœåŠ¡å™¨ä¸Šå®‰è£… ä½ç½®åœ¨ &#x2F;export&#x2F;server"></a>å®‰è£…ä¸Šä¼ å®‰è£…åŒ…: èµ„æ–™ä¸­æä¾›çš„Anaconda3-2021.05-Linux-x86_64.shæ–‡ä»¶åˆ°LinuxæœåŠ¡å™¨ä¸Šå®‰è£… ä½ç½®åœ¨ &#x2F;export&#x2F;server</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cd /export/server</span><br><span class="line"># è¿è¡Œæ–‡ä»¶</span><br><span class="line">sh Anaconda3-2021.05-Linux-x86_64.sh</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">è¿‡ç¨‹æ˜¾ç¤ºï¼š</span><br><span class="line">...</span><br><span class="line"># å‡ºç°å†…å®¹é€‰ yes</span><br><span class="line">Please answer &#x27;yes&#x27; or &#x27;no&#x27;:&#x27;</span><br><span class="line">&gt;&gt;&gt; yes</span><br><span class="line">...</span><br><span class="line"># å‡ºç°æ·»åŠ è·¯å¾„ï¼š/export/server/anaconda3</span><br><span class="line">...</span><br><span class="line">[/root/anaconda3] &gt;&gt;&gt; /export/server/anaconda3</span><br><span class="line">PREFIX=/export/server/anaconda3</span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<h4 id="å®‰è£…å®Œæˆå-é€€å‡ºç»ˆç«¯ï¼Œ-é‡æ–°è¿›æ¥-1"><a href="#å®‰è£…å®Œæˆå-é€€å‡ºç»ˆç«¯ï¼Œ-é‡æ–°è¿›æ¥-1" class="headerlink" title="å®‰è£…å®Œæˆå, é€€å‡ºç»ˆç«¯ï¼Œ é‡æ–°è¿›æ¥"></a>å®‰è£…å®Œæˆå, é€€å‡ºç»ˆç«¯ï¼Œ é‡æ–°è¿›æ¥</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">exit</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ç»“æœæ˜¾ç¤ºï¼š</span><br><span class="line"># çœ‹åˆ°è¿™ä¸ªBaseå¼€å¤´è¡¨æ˜å®‰è£…å¥½äº†.baseæ˜¯é»˜è®¤çš„è™šæ‹Ÿç¯å¢ƒ.</span><br><span class="line">Last login: Tue Mar 15 15:28:59 2022 from 192.168.88.1</span><br><span class="line">(base) [root@master ~]#</span><br></pre></td></tr></table></figure>

<h4 id="åœ¨-master-èŠ‚ç‚¹ä¸ŠæŠŠ-x2F-bashrc-å’Œ-profile-åˆ†å‘ç»™-slave1-å’Œ-slave2"><a href="#åœ¨-master-èŠ‚ç‚¹ä¸ŠæŠŠ-x2F-bashrc-å’Œ-profile-åˆ†å‘ç»™-slave1-å’Œ-slave2" class="headerlink" title="åœ¨ master èŠ‚ç‚¹ä¸ŠæŠŠ .&#x2F;bashrc å’Œ profile åˆ†å‘ç»™ slave1 å’Œ slave2"></a>åœ¨ master èŠ‚ç‚¹ä¸ŠæŠŠ .&#x2F;bashrc å’Œ profile åˆ†å‘ç»™ slave1 å’Œ slave2</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">#åˆ†å‘ .bashrc :</span><br><span class="line">scp ~/.bashrc root@slave1:~/</span><br><span class="line">scp ~/.bashrc root@slave2:~/</span><br><span class="line">#åˆ†å‘ profile :</span><br><span class="line">scp /etc/profile/ root@slave1:/etc/</span><br><span class="line">scp /etc/profile/ root@slave2:/etc/</span><br></pre></td></tr></table></figure>

<h4 id="åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ-pyspark-åŸºäº-python3-8-1"><a href="#åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ-pyspark-åŸºäº-python3-8-1" class="headerlink" title="åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ pyspark åŸºäº python3.8"></a>åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ pyspark åŸºäº python3.8</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">conda create -n pyspark python=3.8</span><br></pre></td></tr></table></figure>

<h4 id="åˆ‡æ¢åˆ°è™šæ‹Ÿç¯å¢ƒå†…-1"><a href="#åˆ‡æ¢åˆ°è™šæ‹Ÿç¯å¢ƒå†…-1" class="headerlink" title="åˆ‡æ¢åˆ°è™šæ‹Ÿç¯å¢ƒå†…"></a>åˆ‡æ¢åˆ°è™šæ‹Ÿç¯å¢ƒå†…</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">conda activate pyspark</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ç»“æœæ˜¾ç¤ºï¼š</span><br><span class="line">(base) [root@master ~]# conda activate pyspark</span><br><span class="line">(pyspark) [root@master ~]#</span><br></pre></td></tr></table></figure>

<h4 id="åœ¨è™šæ‹Ÿç¯å¢ƒå†…å®‰è£…åŒ…-ï¼ˆæœ‰WARNINGä¸ç”¨ç®¡ï¼‰-1"><a href="#åœ¨è™šæ‹Ÿç¯å¢ƒå†…å®‰è£…åŒ…-ï¼ˆæœ‰WARNINGä¸ç”¨ç®¡ï¼‰-1" class="headerlink" title="åœ¨è™šæ‹Ÿç¯å¢ƒå†…å®‰è£…åŒ… ï¼ˆæœ‰WARNINGä¸ç”¨ç®¡ï¼‰"></a>åœ¨è™šæ‹Ÿç¯å¢ƒå†…å®‰è£…åŒ… ï¼ˆæœ‰WARNINGä¸ç”¨ç®¡ï¼‰</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install pyhive pyspark jieba -i https://pypi.tuna.tsinghua.edu.cn/simple</span><br></pre></td></tr></table></figure>

<h4 id="master-èŠ‚ç‚¹èŠ‚ç‚¹è¿›å…¥-x2F-export-x2F-server-x2F-spark-x2F-conf-ä¿®æ”¹ä»¥ä¸‹é…ç½®æ–‡ä»¶"><a href="#master-èŠ‚ç‚¹èŠ‚ç‚¹è¿›å…¥-x2F-export-x2F-server-x2F-spark-x2F-conf-ä¿®æ”¹ä»¥ä¸‹é…ç½®æ–‡ä»¶" class="headerlink" title="master èŠ‚ç‚¹èŠ‚ç‚¹è¿›å…¥ &#x2F;export&#x2F;server&#x2F;spark&#x2F;conf ä¿®æ”¹ä»¥ä¸‹é…ç½®æ–‡ä»¶"></a>master èŠ‚ç‚¹èŠ‚ç‚¹è¿›å…¥ &#x2F;export&#x2F;server&#x2F;spark&#x2F;conf ä¿®æ”¹ä»¥ä¸‹é…ç½®æ–‡ä»¶</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd /export/server/spark/conf</span><br></pre></td></tr></table></figure>

<h4 id="å°†æ–‡ä»¶-workers-template-æ”¹åä¸º-workersï¼Œå¹¶é…ç½®æ–‡ä»¶å†…å®¹"><a href="#å°†æ–‡ä»¶-workers-template-æ”¹åä¸º-workersï¼Œå¹¶é…ç½®æ–‡ä»¶å†…å®¹" class="headerlink" title="å°†æ–‡ä»¶ workers.template æ”¹åä¸º workersï¼Œå¹¶é…ç½®æ–‡ä»¶å†…å®¹"></a>å°†æ–‡ä»¶ workers.template æ”¹åä¸º workersï¼Œå¹¶é…ç½®æ–‡ä»¶å†…å®¹</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mv workers.template workers</span><br><span class="line">vim workers</span><br><span class="line"># localhoståˆ é™¤ï¼Œå†…å®¹è¿½åŠ æ–‡æœ«ï¼š</span><br><span class="line">master</span><br><span class="line">slave1</span><br><span class="line">slave2</span><br><span class="line"># åŠŸèƒ½: è¿™ä¸ªæ–‡ä»¶å°±æ˜¯æŒ‡ç¤ºäº† å½“å‰SparkStandAloneç¯å¢ƒä¸‹, æœ‰å“ªäº›worker</span><br></pre></td></tr></table></figure>

<h4 id="å°†æ–‡ä»¶-spark-env-sh-template-æ”¹åä¸º-spark-env-shï¼Œå¹¶é…ç½®ç›¸å…³å†…å®¹"><a href="#å°†æ–‡ä»¶-spark-env-sh-template-æ”¹åä¸º-spark-env-shï¼Œå¹¶é…ç½®ç›¸å…³å†…å®¹" class="headerlink" title="å°†æ–‡ä»¶ spark-env.sh.template æ”¹åä¸º spark-env.shï¼Œå¹¶é…ç½®ç›¸å…³å†…å®¹"></a>å°†æ–‡ä»¶ spark-env.sh.template æ”¹åä¸º spark-env.shï¼Œå¹¶é…ç½®ç›¸å…³å†…å®¹</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mv spark-env.sh.template spark-env.sh</span><br><span class="line">vim spark-env.sh</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">æ–‡æœ«è¿½åŠ å†…å®¹ï¼š</span><br><span class="line">## è®¾ç½®JAVAå®‰è£…ç›®å½•</span><br><span class="line">JAVA_HOME=/export/server/jdk</span><br><span class="line">## HADOOPè½¯ä»¶é…ç½®æ–‡ä»¶ç›®å½•ï¼Œè¯»å–HDFSä¸Šæ–‡ä»¶å’Œè¿è¡ŒYARNé›†ç¾¤</span><br><span class="line">HADOOP_CONF_DIR=/export/server/hadoop/etc/hadoop</span><br><span class="line">YARN_CONF_DIR=/export/server/hadoop/etc/hadoop</span><br><span class="line">## æŒ‡å®šsparkè€å¤§Masterçš„IPå’Œæäº¤ä»»åŠ¡çš„é€šä¿¡ç«¯å£</span><br><span class="line"># å‘ŠçŸ¥Sparkçš„masterè¿è¡Œåœ¨å“ªä¸ªæœºå™¨ä¸Š</span><br><span class="line">export SPARK_MASTER_HOST=master</span><br><span class="line"># å‘ŠçŸ¥sparkmasterçš„é€šè®¯ç«¯å£</span><br><span class="line">export SPARK_MASTER_PORT=7077</span><br><span class="line"># å‘ŠçŸ¥spark masterçš„ webuiç«¯å£</span><br><span class="line">SPARK_MASTER_WEBUI_PORT=8080</span><br><span class="line"># worker cpuå¯ç”¨æ ¸æ•°</span><br><span class="line">SPARK_WORKER_CORES=1</span><br><span class="line"># workerå¯ç”¨å†…å­˜</span><br><span class="line">SPARK_WORKER_MEMORY=1g</span><br><span class="line"># workerçš„å·¥ä½œé€šè®¯åœ°å€</span><br><span class="line">SPARK_WORKER_PORT=7078</span><br><span class="line"># workerçš„ webuiåœ°å€</span><br><span class="line">SPARK_WORKER_WEBUI_PORT=8081</span><br><span class="line">## è®¾ç½®å†å²æœåŠ¡å™¨</span><br><span class="line"># é…ç½®çš„æ„æ€æ˜¯ å°†sparkç¨‹åºè¿è¡Œçš„å†å²æ—¥å¿— å­˜åˆ°hdfsçš„/sparklogæ–‡ä»¶å¤¹ä¸­</span><br><span class="line">SPARK_HISTORY_OPTS=&quot;-</span><br><span class="line">Dspark.history.fs.logDirectory=hdfs://master:8020/sparklog/ -</span><br><span class="line">Dspark.history.fs.cleaner.enabled=true&quot;</span><br></pre></td></tr></table></figure>

<h4 id="å¼€å¯-hadoop-çš„-hdfs-å’Œ-yarn-é›†ç¾¤"><a href="#å¼€å¯-hadoop-çš„-hdfs-å’Œ-yarn-é›†ç¾¤" class="headerlink" title="å¼€å¯ hadoop çš„ hdfs å’Œ yarn é›†ç¾¤"></a>å¼€å¯ hadoop çš„ hdfs å’Œ yarn é›†ç¾¤</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">start-dfs.sh</span><br><span class="line">start-yarn.sh</span><br></pre></td></tr></table></figure>

<h4 id="åœ¨HDFSä¸Šåˆ›å»ºç¨‹åºè¿è¡Œå†å²è®°å½•å­˜æ”¾çš„æ–‡ä»¶å¤¹ï¼ŒåŒæ ·-conf-æ–‡ä»¶ç›®å½•ä¸‹"><a href="#åœ¨HDFSä¸Šåˆ›å»ºç¨‹åºè¿è¡Œå†å²è®°å½•å­˜æ”¾çš„æ–‡ä»¶å¤¹ï¼ŒåŒæ ·-conf-æ–‡ä»¶ç›®å½•ä¸‹" class="headerlink" title="åœ¨HDFSä¸Šåˆ›å»ºç¨‹åºè¿è¡Œå†å²è®°å½•å­˜æ”¾çš„æ–‡ä»¶å¤¹ï¼ŒåŒæ · conf æ–‡ä»¶ç›®å½•ä¸‹"></a>åœ¨HDFSä¸Šåˆ›å»ºç¨‹åºè¿è¡Œå†å²è®°å½•å­˜æ”¾çš„æ–‡ä»¶å¤¹ï¼ŒåŒæ · conf æ–‡ä»¶ç›®å½•ä¸‹</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hadoop fs -mkdir /sparklog</span><br><span class="line">hadoop fs -chmod 777 /sparklog</span><br></pre></td></tr></table></figure>

<h4 id="å°†-spark-defaults-conf-template-æ”¹ä¸º-spark-defaults-conf-å¹¶åšç›¸å…³é…ç½®"><a href="#å°†-spark-defaults-conf-template-æ”¹ä¸º-spark-defaults-conf-å¹¶åšç›¸å…³é…ç½®" class="headerlink" title="å°† spark-defaults.conf.template æ”¹ä¸º spark-defaults.conf å¹¶åšç›¸å…³é…ç½®"></a>å°† spark-defaults.conf.template æ”¹ä¸º spark-defaults.conf å¹¶åšç›¸å…³é…ç½®</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">mv spark-defaults.conf.template spark-defaults.conf</span><br><span class="line">vim spark-defaults.conf</span><br><span class="line">æ–‡æœ«è¿½åŠ å†…å®¹ä¸ºï¼š</span><br><span class="line"># å¼€å¯sparkçš„æ—¥æœŸè®°å½•åŠŸèƒ½</span><br><span class="line">spark.eventLog.enabled true</span><br><span class="line"># è®¾ç½®sparkæ—¥å¿—è®°å½•çš„è·¯å¾„</span><br><span class="line">spark.eventLog.dir hdfs://master:8020/sparklog/</span><br><span class="line"># è®¾ç½®sparkæ—¥å¿—æ˜¯å¦å¯åŠ¨å‹ç¼©</span><br><span class="line">spark.eventLog.compress true</span><br></pre></td></tr></table></figure>

<h4 id="é…ç½®-log4j-properties-æ–‡ä»¶-å°†æ–‡ä»¶ç¬¬-19-è¡Œçš„-log4j-rootCategory-x3D-INFO-console-æ”¹ä¸º-log4j-rootCategory-x3D-WARN-console-ï¼ˆå³å°†INFO-æ”¹ä¸º-WARN-ç›®çš„ï¼šè¾“å‡ºæ—¥å¿—-è®¾ç½®çº§åˆ«ä¸º-WARN-åªè¾“å‡ºè­¦å‘Šå’Œé”™è¯¯æ—¥å¿—ï¼ŒINFO-åˆ™ä¸ºè¾“å‡ºæ‰€æœ‰ä¿¡æ¯ï¼Œå¤šæ•°ä¸ºæ— ç”¨ä¿¡æ¯ï¼‰"><a href="#é…ç½®-log4j-properties-æ–‡ä»¶-å°†æ–‡ä»¶ç¬¬-19-è¡Œçš„-log4j-rootCategory-x3D-INFO-console-æ”¹ä¸º-log4j-rootCategory-x3D-WARN-console-ï¼ˆå³å°†INFO-æ”¹ä¸º-WARN-ç›®çš„ï¼šè¾“å‡ºæ—¥å¿—-è®¾ç½®çº§åˆ«ä¸º-WARN-åªè¾“å‡ºè­¦å‘Šå’Œé”™è¯¯æ—¥å¿—ï¼ŒINFO-åˆ™ä¸ºè¾“å‡ºæ‰€æœ‰ä¿¡æ¯ï¼Œå¤šæ•°ä¸ºæ— ç”¨ä¿¡æ¯ï¼‰" class="headerlink" title="é…ç½® log4j.properties æ–‡ä»¶ å°†æ–‡ä»¶ç¬¬ 19 è¡Œçš„ log4j.rootCategory&#x3D;INFO, console æ”¹ä¸º log4j.rootCategory&#x3D;WARN, console ï¼ˆå³å°†INFO æ”¹ä¸º WARN ç›®çš„ï¼šè¾“å‡ºæ—¥å¿—, è®¾ç½®çº§åˆ«ä¸º WARN åªè¾“å‡ºè­¦å‘Šå’Œé”™è¯¯æ—¥å¿—ï¼ŒINFO åˆ™ä¸ºè¾“å‡ºæ‰€æœ‰ä¿¡æ¯ï¼Œå¤šæ•°ä¸ºæ— ç”¨ä¿¡æ¯ï¼‰"></a>é…ç½® log4j.properties æ–‡ä»¶ å°†æ–‡ä»¶ç¬¬ 19 è¡Œçš„ log4j.rootCategory&#x3D;INFO, console æ”¹ä¸º log4j.rootCategory&#x3D;WARN, console ï¼ˆå³å°†INFO æ”¹ä¸º WARN ç›®çš„ï¼šè¾“å‡ºæ—¥å¿—, è®¾ç½®çº§åˆ«ä¸º WARN åªè¾“å‡ºè­¦å‘Šå’Œé”™è¯¯æ—¥å¿—ï¼ŒINFO åˆ™ä¸ºè¾“å‡ºæ‰€æœ‰ä¿¡æ¯ï¼Œå¤šæ•°ä¸ºæ— ç”¨ä¿¡æ¯ï¼‰</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mv log4j.properties.template log4j.properties</span><br><span class="line">vim log4j.properties</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ç»“æœæ˜¾ç¤ºï¼š</span><br><span class="line">...</span><br><span class="line">18 # Set everything to be logged to the console</span><br><span class="line">19 log4j.rootCategory=WARN, console</span><br><span class="line">....</span><br></pre></td></tr></table></figure>

<h4 id="master-èŠ‚ç‚¹åˆ†å‘-spark-å®‰è£…æ–‡ä»¶å¤¹-åˆ°-slave1-å’Œ-slave2-ä¸Š"><a href="#master-èŠ‚ç‚¹åˆ†å‘-spark-å®‰è£…æ–‡ä»¶å¤¹-åˆ°-slave1-å’Œ-slave2-ä¸Š" class="headerlink" title="master èŠ‚ç‚¹åˆ†å‘ spark å®‰è£…æ–‡ä»¶å¤¹ åˆ° slave1 å’Œ slave2 ä¸Š"></a>master èŠ‚ç‚¹åˆ†å‘ spark å®‰è£…æ–‡ä»¶å¤¹ åˆ° slave1 å’Œ slave2 ä¸Š</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cd /export/server/</span><br><span class="line">scp -r /export/server/spark-3.2.0-bin-hadoop3.2/ slave1:$PWD</span><br><span class="line">scp -r /export/server/spark-3.2.0-bin-hadoop3.2/ slave2:$PWD</span><br></pre></td></tr></table></figure>

<h4 id="åœ¨slave1-å’Œ-slave2-ä¸Šåšè½¯è¿æ¥"><a href="#åœ¨slave1-å’Œ-slave2-ä¸Šåšè½¯è¿æ¥" class="headerlink" title="åœ¨slave1 å’Œ slave2 ä¸Šåšè½¯è¿æ¥"></a>åœ¨slave1 å’Œ slave2 ä¸Šåšè½¯è¿æ¥</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ln -s /export/server/spark-3.2.0-bin-hadoop3.2 /export/server/spark</span><br></pre></td></tr></table></figure>

<h4 id="é‡æ–°åŠ è½½ç¯å¢ƒå˜é‡"><a href="#é‡æ–°åŠ è½½ç¯å¢ƒå˜é‡" class="headerlink" title="é‡æ–°åŠ è½½ç¯å¢ƒå˜é‡"></a>é‡æ–°åŠ è½½ç¯å¢ƒå˜é‡</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">source /etc/profile</span><br></pre></td></tr></table></figure>

<h4 id="è¿›å…¥-x2F-export-x2F-server-x2F-spark-x2F-sbin-æ–‡ä»¶ç›®å½•ä¸‹-å¯åŠ¨-start-history-server-sh"><a href="#è¿›å…¥-x2F-export-x2F-server-x2F-spark-x2F-sbin-æ–‡ä»¶ç›®å½•ä¸‹-å¯åŠ¨-start-history-server-sh" class="headerlink" title="è¿›å…¥ &#x2F;export&#x2F;server&#x2F;spark&#x2F;sbin æ–‡ä»¶ç›®å½•ä¸‹ å¯åŠ¨ start-history-server.sh"></a>è¿›å…¥ &#x2F;export&#x2F;server&#x2F;spark&#x2F;sbin æ–‡ä»¶ç›®å½•ä¸‹ å¯åŠ¨ start-history-server.sh</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd /export/server/spark/sbin</span><br><span class="line">./start-history-server.sh</span><br></pre></td></tr></table></figure>

<h4 id="è®¿é—®-WebUI-ç•Œé¢"><a href="#è®¿é—®-WebUI-ç•Œé¢" class="headerlink" title="è®¿é—® WebUI ç•Œé¢"></a>è®¿é—® WebUI ç•Œé¢</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">æµè§ˆå™¨è®¿é—®ï¼š</span><br><span class="line">http://master:18080/</span><br></pre></td></tr></table></figure>

<h4 id="å¯åŠ¨Sparkçš„Masterå’ŒWorkerè¿›ç¨‹"><a href="#å¯åŠ¨Sparkçš„Masterå’ŒWorkerè¿›ç¨‹" class="headerlink" title="å¯åŠ¨Sparkçš„Masterå’ŒWorkerè¿›ç¨‹"></a>å¯åŠ¨Sparkçš„Masterå’ŒWorkerè¿›ç¨‹</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"># å¯åŠ¨å…¨éƒ¨masterå’Œworker</span><br><span class="line">sbin/start-all.sh</span><br><span class="line"># æˆ–è€…å¯ä»¥ä¸€ä¸ªä¸ªå¯åŠ¨:</span><br><span class="line"># å¯åŠ¨å½“å‰æœºå™¨çš„master</span><br><span class="line">sbin/start-master.sh</span><br><span class="line"># å¯åŠ¨å½“å‰æœºå™¨çš„worker</span><br><span class="line">sbin/start-worker.sh</span><br><span class="line"># åœæ­¢å…¨éƒ¨</span><br><span class="line">sbin/stop-all.sh</span><br><span class="line"># åœæ­¢å½“å‰æœºå™¨çš„master</span><br><span class="line">sbin/stop-master.sh</span><br><span class="line"># åœæ­¢å½“å‰æœºå™¨çš„worker</span><br><span class="line">sbin/stop-worker.sh</span><br></pre></td></tr></table></figure>

<h4 id="è®¿é—®-WebUIç•Œé¢"><a href="#è®¿é—®-WebUIç•Œé¢" class="headerlink" title="è®¿é—® WebUIç•Œé¢"></a>è®¿é—® WebUIç•Œé¢</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">æµè§ˆå™¨è®¿é—®ï¼š</span><br><span class="line">http://master:8080/</span><br></pre></td></tr></table></figure>


	

	

</article>




	<article>
	
		<h1><a href="/2022/05/24/Spark/">SparkåŸºç¡€ç¯å¢ƒé…ç½®</a></h1>
	
	<div class="article__infos">
		<span class="article__date">2022-05-24</span><br />
		
		
			<span class="article__tags">
			  	<a class="article__tag-none-link" href="/tags/Spark/" rel="tag">Spark</a>
			</span>
		
	</div>

	

	
		<p>Welcome to visit!ğŸ¥° If there is any incorrect place in this article, you are welcome to correct it. Beginner onlyğŸ˜</p>
<h2 id="åŸºç¡€é…ç½®"><a href="#åŸºç¡€é…ç½®" class="headerlink" title="åŸºç¡€é…ç½®"></a>åŸºç¡€é…ç½®</h2><h3 id="å®Œæˆå¯¹è™šæ‹Ÿçš„ä¸»æœºåã€ç½‘å¡çš„è®¾ç½®"><a href="#å®Œæˆå¯¹è™šæ‹Ÿçš„ä¸»æœºåã€ç½‘å¡çš„è®¾ç½®" class="headerlink" title="å®Œæˆå¯¹è™šæ‹Ÿçš„ä¸»æœºåã€ç½‘å¡çš„è®¾ç½®"></a>å®Œæˆå¯¹è™šæ‹Ÿçš„ä¸»æœºåã€ç½‘å¡çš„è®¾ç½®</h3><table>
<thead>
<tr>
<th>ä¸»æœºå</th>
<th>node1.itcast.cn</th>
<th>node2.itcast.cn</th>
<th>node3.itcast.cn</th>
</tr>
</thead>
<tbody><tr>
<td>IP</td>
<td>192.168.88.151</td>
<td>192.168.88.152</td>
<td>192.168.88.153</td>
</tr>
<tr>
<td>ç”¨æˆ·åã€å¯†ç </td>
<td>root  123456</td>
<td>root  123456</td>
<td>root  123456</td>
</tr>
</tbody></table>
<h3 id="ç›¸å…³æ“ä½œ"><a href="#ç›¸å…³æ“ä½œ" class="headerlink" title="ç›¸å…³æ“ä½œ"></a>ç›¸å…³æ“ä½œ</h3><h4 id="æŸ¥çœ‹ä¸»æœºå"><a href="#æŸ¥çœ‹ä¸»æœºå" class="headerlink" title="æŸ¥çœ‹ä¸»æœºå"></a>æŸ¥çœ‹ä¸»æœºå</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat /etc/hostname</span><br></pre></td></tr></table></figure>

<h4 id="æŸ¥çœ‹hostsæ˜ å°„"><a href="#æŸ¥çœ‹hostsæ˜ å°„" class="headerlink" title="æŸ¥çœ‹hostsæ˜ å°„"></a>æŸ¥çœ‹hostsæ˜ å°„</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat /etc/hosts</span><br></pre></td></tr></table></figure>

<h4 id="æŸ¥çœ‹é˜²ç«å¢™çŠ¶æ€"><a href="#æŸ¥çœ‹é˜²ç«å¢™çŠ¶æ€" class="headerlink" title="æŸ¥çœ‹é˜²ç«å¢™çŠ¶æ€"></a>æŸ¥çœ‹é˜²ç«å¢™çŠ¶æ€</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl status firewalld.service</span><br></pre></td></tr></table></figure>

<h4 id="ç™»é™†node1ã€node2ã€node3"><a href="#ç™»é™†node1ã€node2ã€node3" class="headerlink" title="ç™»é™†node1ã€node2ã€node3"></a>ç™»é™†node1ã€node2ã€node3</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ssh node1</span><br><span class="line">ssh node2</span><br><span class="line">ssh node3</span><br></pre></td></tr></table></figure>

<h4 id="åŒæ­¥æ—¶é—´"><a href="#åŒæ­¥æ—¶é—´" class="headerlink" title="åŒæ­¥æ—¶é—´"></a>åŒæ­¥æ—¶é—´</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ntpdate ntp5.aliyun.com</span><br></pre></td></tr></table></figure>

<h2 id="JDKé…ç½®"><a href="#JDKé…ç½®" class="headerlink" title="JDKé…ç½®"></a>JDKé…ç½®</h2><h3 id="ç¼–è¯‘ç¯å¢ƒè½¯ä»¶å®‰è£…ç›®å½•"><a href="#ç¼–è¯‘ç¯å¢ƒè½¯ä»¶å®‰è£…ç›®å½•" class="headerlink" title="ç¼–è¯‘ç¯å¢ƒè½¯ä»¶å®‰è£…ç›®å½•"></a>ç¼–è¯‘ç¯å¢ƒè½¯ä»¶å®‰è£…ç›®å½•</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p /export/server</span><br></pre></td></tr></table></figure>

<h3 id="JDKå¯¼å…¥-x2F-export-x2F-serverï¼Œè§£å‹"><a href="#JDKå¯¼å…¥-x2F-export-x2F-serverï¼Œè§£å‹" class="headerlink" title="JDKå¯¼å…¥&#x2F;export&#x2F;serverï¼Œè§£å‹"></a>JDKå¯¼å…¥&#x2F;export&#x2F;serverï¼Œè§£å‹</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar -zxvf jdk-8u241-linux-x64.tar.gz</span><br></pre></td></tr></table></figure>

<h3 id="é…ç½®ç¯å¢ƒå˜é‡"><a href="#é…ç½®ç¯å¢ƒå˜é‡" class="headerlink" title="é…ç½®ç¯å¢ƒå˜é‡"></a>é…ç½®ç¯å¢ƒå˜é‡</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/profile</span><br><span class="line">export JAVA_HOME=/export/server/jdk1.8.0_241</span><br><span class="line">export PATH=$PATH:$JAVA_HOME/bin</span><br><span class="line">export CLASSPATH=.:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar</span><br></pre></td></tr></table></figure>

<h3 id="é‡æ–°åŠ è½½ç¯å¢ƒå˜é‡æ–‡ä»¶"><a href="#é‡æ–°åŠ è½½ç¯å¢ƒå˜é‡æ–‡ä»¶" class="headerlink" title="é‡æ–°åŠ è½½ç¯å¢ƒå˜é‡æ–‡ä»¶"></a>é‡æ–°åŠ è½½ç¯å¢ƒå˜é‡æ–‡ä»¶</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">source /etc/profile</span><br></pre></td></tr></table></figure>

<h3 id="æŸ¥çœ‹-java-ç‰ˆæœ¬å·"><a href="#æŸ¥çœ‹-java-ç‰ˆæœ¬å·" class="headerlink" title="æŸ¥çœ‹ java ç‰ˆæœ¬å·"></a>æŸ¥çœ‹ java ç‰ˆæœ¬å·</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java -version</span><br></pre></td></tr></table></figure>

<h3 id="å°†javaæ‹·è´å¹¶ä¼ è¾“åˆ°æ‰€å±çš„node2å’Œnode3"><a href="#å°†javaæ‹·è´å¹¶ä¼ è¾“åˆ°æ‰€å±çš„node2å’Œnode3" class="headerlink" title="å°†javaæ‹·è´å¹¶ä¼ è¾“åˆ°æ‰€å±çš„node2å’Œnode3"></a>å°†javaæ‹·è´å¹¶ä¼ è¾“åˆ°æ‰€å±çš„node2å’Œnode3</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">scp -r /export/server/jdk1.8.0_241/ root@node2:/export/server/</span><br><span class="line">scp -r /export/server/jdk1.8.0_241/ root@node3:/export/server/</span><br></pre></td></tr></table></figure>

<h3 id="é…ç½®-node2-å’Œ-node3-çš„-JDK-ç¯å¢ƒå˜é‡ï¼ˆæ³¨ï¼šå’Œä¸Šæ–¹node1çš„é…ç½®æ–¹æ³•ä¸€æ ·ï¼‰"><a href="#é…ç½®-node2-å’Œ-node3-çš„-JDK-ç¯å¢ƒå˜é‡ï¼ˆæ³¨ï¼šå’Œä¸Šæ–¹node1çš„é…ç½®æ–¹æ³•ä¸€æ ·ï¼‰" class="headerlink" title="é…ç½® node2 å’Œ node3 çš„ JDK ç¯å¢ƒå˜é‡ï¼ˆæ³¨ï¼šå’Œä¸Šæ–¹node1çš„é…ç½®æ–¹æ³•ä¸€æ ·ï¼‰"></a>é…ç½® node2 å’Œ node3 çš„ JDK ç¯å¢ƒå˜é‡ï¼ˆæ³¨ï¼šå’Œä¸Šæ–¹node1çš„é…ç½®æ–¹æ³•ä¸€æ ·ï¼‰</h3><h3 id="åœ¨node1-node2-å’Œnode3-åˆ›å»ºè½¯è¿æ¥"><a href="#åœ¨node1-node2-å’Œnode3-åˆ›å»ºè½¯è¿æ¥" class="headerlink" title="åœ¨node1 node2 å’Œnode3 åˆ›å»ºè½¯è¿æ¥"></a>åœ¨node1 node2 å’Œnode3 åˆ›å»ºè½¯è¿æ¥</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd /export/server</span><br><span class="line">ln -s jdk1.8.0_241/ jdk</span><br></pre></td></tr></table></figure>

<h3 id="é‡æ–°åŠ è½½ç¯å¢ƒå˜é‡æ–‡ä»¶-1"><a href="#é‡æ–°åŠ è½½ç¯å¢ƒå˜é‡æ–‡ä»¶-1" class="headerlink" title="é‡æ–°åŠ è½½ç¯å¢ƒå˜é‡æ–‡ä»¶"></a>é‡æ–°åŠ è½½ç¯å¢ƒå˜é‡æ–‡ä»¶</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">source /etc/profile</span><br></pre></td></tr></table></figure>

<h2 id="zookeeperå®‰è£…é…ç½®"><a href="#zookeeperå®‰è£…é…ç½®" class="headerlink" title="zookeeperå®‰è£…é…ç½®"></a>zookeeperå®‰è£…é…ç½®</h2><p>æ³¨ï¼šä¸‹æ–‡ä¸­masterã€slave1ã€slave2åˆ†åˆ«ä¸ºnode1ã€node2ã€node3</p>
<h3 id="é…ç½®ä¸»æœºåå’ŒIPçš„æ˜ å°„å…³ç³»ï¼Œä¿®æ”¹-x2F-etc-x2F-hosts-æ–‡ä»¶ï¼Œæ·»åŠ -master-root-slave1-root-slave2-root"><a href="#é…ç½®ä¸»æœºåå’ŒIPçš„æ˜ å°„å…³ç³»ï¼Œä¿®æ”¹-x2F-etc-x2F-hosts-æ–‡ä»¶ï¼Œæ·»åŠ -master-root-slave1-root-slave2-root" class="headerlink" title="é…ç½®ä¸»æœºåå’ŒIPçš„æ˜ å°„å…³ç³»ï¼Œä¿®æ”¹ &#x2F;etc&#x2F;hosts æ–‡ä»¶ï¼Œæ·»åŠ  master.root slave1.root slave2.root"></a>é…ç½®ä¸»æœºåå’ŒIPçš„æ˜ å°„å…³ç³»ï¼Œä¿®æ”¹ &#x2F;etc&#x2F;hosts æ–‡ä»¶ï¼Œæ·»åŠ  master.root slave1.root slave2.root</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/hosts</span><br><span class="line">#ç»“æœæ˜¾ç¤º</span><br><span class="line">127.0.0.1 localhost localhost.localdomain localhost4</span><br><span class="line">localhost4.localdomain4</span><br><span class="line">::1 localhost localhost.localdomain localhost6</span><br><span class="line">localhost6.localdomain6</span><br><span class="line">192.168.88.135 master master.root</span><br><span class="line">192.168.88.136 slave1 slave1.root</span><br><span class="line">192.168.88.137 slave2 slave2.root</span><br></pre></td></tr></table></figure>

<h3 id="zookeeperå®‰è£…-ä¸Šä¼ -zookeeper-3-4-10-tar-gzåˆ°-x2F-export-x2F-server-x2F-ç›®å½•ä¸‹-å¹¶è§£å‹æ–‡ä»¶"><a href="#zookeeperå®‰è£…-ä¸Šä¼ -zookeeper-3-4-10-tar-gzåˆ°-x2F-export-x2F-server-x2F-ç›®å½•ä¸‹-å¹¶è§£å‹æ–‡ä»¶" class="headerlink" title="zookeeperå®‰è£… ä¸Šä¼  zookeeper-3.4.10.tar.gzåˆ°&#x2F;export&#x2F;server&#x2F;ç›®å½•ä¸‹ å¹¶è§£å‹æ–‡ä»¶"></a>zookeeperå®‰è£… ä¸Šä¼  zookeeper-3.4.10.tar.gzåˆ°&#x2F;export&#x2F;server&#x2F;ç›®å½•ä¸‹ å¹¶è§£å‹æ–‡ä»¶</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd /export/server/</span><br><span class="line">tar -zxvf zookeeper-3.4.10.tar.gz</span><br></pre></td></tr></table></figure>

<h3 id="åœ¨-x2F-export-x2F-server-ç›®å½•ä¸‹åˆ›å»ºè½¯è¿æ¥"><a href="#åœ¨-x2F-export-x2F-server-ç›®å½•ä¸‹åˆ›å»ºè½¯è¿æ¥" class="headerlink" title="åœ¨ &#x2F;export&#x2F;server ç›®å½•ä¸‹åˆ›å»ºè½¯è¿æ¥"></a>åœ¨ &#x2F;export&#x2F;server ç›®å½•ä¸‹åˆ›å»ºè½¯è¿æ¥</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd /export/server</span><br><span class="line">ln -s zookeeper-3.4.10/ zookeeper</span><br></pre></td></tr></table></figure>

<h3 id="è¿›å…¥-x2F-export-x2F-server-x2F-zookeeper-x2F-conf-x2F-å°†-zoo-sample-cfg-æ–‡ä»¶å¤åˆ¶ä¸ºæ–°æ–‡ä»¶-zoo-cfg"><a href="#è¿›å…¥-x2F-export-x2F-server-x2F-zookeeper-x2F-conf-x2F-å°†-zoo-sample-cfg-æ–‡ä»¶å¤åˆ¶ä¸ºæ–°æ–‡ä»¶-zoo-cfg" class="headerlink" title="è¿›å…¥ &#x2F;export&#x2F;server&#x2F;zookeeper&#x2F;conf&#x2F; å°† zoo_sample.cfg æ–‡ä»¶å¤åˆ¶ä¸ºæ–°æ–‡ä»¶ zoo.cfg"></a>è¿›å…¥ &#x2F;export&#x2F;server&#x2F;zookeeper&#x2F;conf&#x2F; å°† zoo_sample.cfg æ–‡ä»¶å¤åˆ¶ä¸ºæ–°æ–‡ä»¶ zoo.cfg</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd /export/server/zookeeper/conf/</span><br><span class="line">cp zoo_sample.cfg zoo.cfg</span><br></pre></td></tr></table></figure>

<h3 id="æ¥ä¸Šæ­¥ç»™-zoo-cfg-æ·»åŠ å†…å®¹"><a href="#æ¥ä¸Šæ­¥ç»™-zoo-cfg-æ·»åŠ å†…å®¹" class="headerlink" title="æ¥ä¸Šæ­¥ç»™ zoo.cfg æ·»åŠ å†…å®¹"></a>æ¥ä¸Šæ­¥ç»™ zoo.cfg æ·»åŠ å†…å®¹</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">#Zookeeperçš„æ•°æ®å­˜æ”¾ç›®å½•</span><br><span class="line">dataDir=/export/server/zookeeper/zkdatas</span><br><span class="line"># ä¿ç•™å¤šå°‘ä¸ªå¿«ç…§</span><br><span class="line">autopurge.snapRetainCount=3</span><br><span class="line"># æ—¥å¿—å¤šå°‘å°æ—¶æ¸…ç†ä¸€æ¬¡</span><br><span class="line">autopurge.purgeInterval=1</span><br><span class="line"># é›†ç¾¤ä¸­æœåŠ¡å™¨åœ°å€</span><br><span class="line">server.1=master:2888:3888</span><br><span class="line">server.2=slave1:2888:3888</span><br><span class="line">server.3=slave2:2888:3888</span><br></pre></td></tr></table></figure>

<h3 id="è¿›å…¥-x2F-export-x2F-server-x2F-zookeeper-x2F-zkdatas-ç›®å½•åœ¨æ­¤ç›®å½•ä¸‹åˆ›å»º-myid-æ–‡ä»¶ï¼Œå°†-1-å†™å…¥è¿›å»"><a href="#è¿›å…¥-x2F-export-x2F-server-x2F-zookeeper-x2F-zkdatas-ç›®å½•åœ¨æ­¤ç›®å½•ä¸‹åˆ›å»º-myid-æ–‡ä»¶ï¼Œå°†-1-å†™å…¥è¿›å»" class="headerlink" title="è¿›å…¥ &#x2F;export&#x2F;server&#x2F;zookeeper&#x2F;zkdatas ç›®å½•åœ¨æ­¤ç›®å½•ä¸‹åˆ›å»º myid æ–‡ä»¶ï¼Œå°† 1 å†™å…¥è¿›å»"></a>è¿›å…¥ &#x2F;export&#x2F;server&#x2F;zookeeper&#x2F;zkdatas ç›®å½•åœ¨æ­¤ç›®å½•ä¸‹åˆ›å»º myid æ–‡ä»¶ï¼Œå°† 1 å†™å…¥è¿›å»</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cd /export/server/zookeeper/zkdata</span><br><span class="line">touch myid</span><br><span class="line">echo &#x27;1&#x27; &gt; myid</span><br></pre></td></tr></table></figure>

<h3 id="å°†-master-èŠ‚ç‚¹ä¸­-x2F-export-x2F-server-x2F-zookeeper-3-4-10-è·¯å¾„ä¸‹å†…å®¹æ¨é€ç»™slave1-å’Œ-slave2"><a href="#å°†-master-èŠ‚ç‚¹ä¸­-x2F-export-x2F-server-x2F-zookeeper-3-4-10-è·¯å¾„ä¸‹å†…å®¹æ¨é€ç»™slave1-å’Œ-slave2" class="headerlink" title="å°† master èŠ‚ç‚¹ä¸­&#x2F;export&#x2F;server&#x2F;zookeeper-3.4.10 è·¯å¾„ä¸‹å†…å®¹æ¨é€ç»™slave1 å’Œ slave2"></a>å°† master èŠ‚ç‚¹ä¸­&#x2F;export&#x2F;server&#x2F;zookeeper-3.4.10 è·¯å¾„ä¸‹å†…å®¹æ¨é€ç»™slave1 å’Œ slave2</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">scp -r /export/server/zookeeper-3.4.10/ slave1:$PWD</span><br><span class="line">scp -r /export/server/zookeeper-3.4.10/ slave2:$PWD</span><br></pre></td></tr></table></figure>

<h3 id="æ¨é€æˆåŠŸåï¼Œåˆ†åˆ«åœ¨-slave1-å’Œ-slave2-ä¸Šåˆ›å»ºè½¯è¿æ¥"><a href="#æ¨é€æˆåŠŸåï¼Œåˆ†åˆ«åœ¨-slave1-å’Œ-slave2-ä¸Šåˆ›å»ºè½¯è¿æ¥" class="headerlink" title="æ¨é€æˆåŠŸåï¼Œåˆ†åˆ«åœ¨ slave1 å’Œ slave2 ä¸Šåˆ›å»ºè½¯è¿æ¥"></a>æ¨é€æˆåŠŸåï¼Œåˆ†åˆ«åœ¨ slave1 å’Œ slave2 ä¸Šåˆ›å»ºè½¯è¿æ¥</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ln -s zookeeper-3.4.10/ zookeeper</span><br></pre></td></tr></table></figure>

<h3 id="æ¥ä¸Šæ­¥æ¨é€å®Œæˆåå°†-slave1-å’Œ-slave2-çš„-x2F-export-x2F-server-x2F-zookeeper-x2F-zkdatas-x2F-æ–‡ä»¶å¤¹ä¸‹çš„-myid-ä¸­çš„å†…å®¹åˆ†åˆ«æ”¹ä¸º-2-å’Œ-3"><a href="#æ¥ä¸Šæ­¥æ¨é€å®Œæˆåå°†-slave1-å’Œ-slave2-çš„-x2F-export-x2F-server-x2F-zookeeper-x2F-zkdatas-x2F-æ–‡ä»¶å¤¹ä¸‹çš„-myid-ä¸­çš„å†…å®¹åˆ†åˆ«æ”¹ä¸º-2-å’Œ-3" class="headerlink" title="æ¥ä¸Šæ­¥æ¨é€å®Œæˆåå°† slave1 å’Œ slave2 çš„ &#x2F;export&#x2F;server&#x2F;zookeeper&#x2F;zkdatas&#x2F; æ–‡ä»¶å¤¹ä¸‹çš„ myid ä¸­çš„å†…å®¹åˆ†åˆ«æ”¹ä¸º 2 å’Œ 3"></a>æ¥ä¸Šæ­¥æ¨é€å®Œæˆåå°† slave1 å’Œ slave2 çš„ &#x2F;export&#x2F;server&#x2F;zookeeper&#x2F;zkdatas&#x2F; æ–‡ä»¶å¤¹ä¸‹çš„ myid ä¸­çš„å†…å®¹åˆ†åˆ«æ”¹ä¸º 2 å’Œ 3</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">cd /export/server/zookeeper/zkdatas/</span><br><span class="line">ç»“æœæ˜¾ç¤ºï¼š</span><br><span class="line">[root@slave1 zkdatas]# vim myid</span><br><span class="line">[root@slave1 zkdatas]# more myid</span><br><span class="line">2</span><br><span class="line">[root@slave2 zkdatas]# vim myid</span><br><span class="line">[root@slave2 zkdatas]# more myid</span><br><span class="line">3</span><br></pre></td></tr></table></figure>

<h3 id="é…ç½®zookeeperçš„ç¯å¢ƒå˜é‡ï¼ˆæ³¨ï¼šä¸‰å°ä¸»æœºéƒ½éœ€è¦é…ç½®ï¼‰"><a href="#é…ç½®zookeeperçš„ç¯å¢ƒå˜é‡ï¼ˆæ³¨ï¼šä¸‰å°ä¸»æœºéƒ½éœ€è¦é…ç½®ï¼‰" class="headerlink" title="é…ç½®zookeeperçš„ç¯å¢ƒå˜é‡ï¼ˆæ³¨ï¼šä¸‰å°ä¸»æœºéƒ½éœ€è¦é…ç½®ï¼‰"></a>é…ç½®zookeeperçš„ç¯å¢ƒå˜é‡ï¼ˆæ³¨ï¼šä¸‰å°ä¸»æœºéƒ½éœ€è¦é…ç½®ï¼‰</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/profile</span><br><span class="line"># zookeeper ç¯å¢ƒå˜é‡</span><br><span class="line">export ZOOKEEPER_HOME=/export/server/zookeeper</span><br><span class="line">export PATH=$PATH:$ZOOKEEPER_HOME/bin</span><br></pre></td></tr></table></figure>

<h3 id="é‡æ–°åŠ è½½ç¯å¢ƒå˜é‡æ–‡ä»¶-2"><a href="#é‡æ–°åŠ è½½ç¯å¢ƒå˜é‡æ–‡ä»¶-2" class="headerlink" title="é‡æ–°åŠ è½½ç¯å¢ƒå˜é‡æ–‡ä»¶"></a>é‡æ–°åŠ è½½ç¯å¢ƒå˜é‡æ–‡ä»¶</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">source /etc/profile</span><br></pre></td></tr></table></figure>

<h3 id="è¿›å…¥-x2F-export-x2F-server-x2F-zookeeper-3-4-10-x2F-bin-ç›®å½•ä¸‹å¯åŠ¨-zkServer-sh-è„šæœ¬-ï¼ˆæ³¨ï¼šä¸‰å°éƒ½éœ€è¦åšï¼‰"><a href="#è¿›å…¥-x2F-export-x2F-server-x2F-zookeeper-3-4-10-x2F-bin-ç›®å½•ä¸‹å¯åŠ¨-zkServer-sh-è„šæœ¬-ï¼ˆæ³¨ï¼šä¸‰å°éƒ½éœ€è¦åšï¼‰" class="headerlink" title="è¿›å…¥ &#x2F;export&#x2F;server&#x2F;zookeeper-3.4.10&#x2F;bin ç›®å½•ä¸‹å¯åŠ¨ zkServer.sh è„šæœ¬ ï¼ˆæ³¨ï¼šä¸‰å°éƒ½éœ€è¦åšï¼‰"></a>è¿›å…¥ &#x2F;export&#x2F;server&#x2F;zookeeper-3.4.10&#x2F;bin ç›®å½•ä¸‹å¯åŠ¨ zkServer.sh è„šæœ¬ ï¼ˆæ³¨ï¼šä¸‰å°éƒ½éœ€è¦åšï¼‰</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd /export/server/zookeeper-3.4.10/bin</span><br><span class="line">zkServer.sh start</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ç»“æœæ˜¾ç¤ºï¼š</span><br><span class="line">[root@master bin]# ./zkServer.sh start</span><br><span class="line">ZooKeeper JMX enabled by default</span><br><span class="line">Using config: /export/server/zookeeper-3.4.10/bin/../conf/zoo.cfg</span><br><span class="line">Starting zookeeper ... STARTED</span><br></pre></td></tr></table></figure>

<h3 id="æŸ¥çœ‹-zookeeper-çš„çŠ¶æ€"><a href="#æŸ¥çœ‹-zookeeper-çš„çŠ¶æ€" class="headerlink" title="æŸ¥çœ‹ zookeeper çš„çŠ¶æ€"></a>æŸ¥çœ‹ zookeeper çš„çŠ¶æ€</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">zkServer.sh status</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">ç»“æœæ˜¾ç¤ºï¼š</span><br><span class="line">[root@master server]# zkServer.sh status</span><br><span class="line">ZooKeeper JMX enabled by default</span><br><span class="line">Using config: /export/server/zookeeper-3.4.10/bin/../conf/zoo.cfg</span><br><span class="line">Mode: follower</span><br><span class="line">[root@slave1 server]# zkServer.sh status</span><br><span class="line">ZooKeeper JMX enabled by default</span><br><span class="line">Using config: /export/server/zookeeper-3.4.10/bin/../conf/zoo.cfg</span><br><span class="line">Mode: follower</span><br><span class="line">[root@slave2 conf]# zkServer.sh status</span><br><span class="line">ZooKeeper JMX enabled by default</span><br><span class="line">Using config: /export/server/zookeeper-3.4.10/bin/../conf/zoo.cfg</span><br><span class="line">Mode: leader</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jps</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">ç»“æœæ˜¾ç¤ºï¼š</span><br><span class="line">[root@master server]# jps</span><br><span class="line">125348 QuorumPeerMain</span><br><span class="line">16311 Jps</span><br><span class="line">[root@slave1 server]# jps</span><br><span class="line">126688 QuorumPeerMain</span><br><span class="line">17685 Jps</span><br><span class="line">[root@slave2 conf]# jps</span><br><span class="line">126733 QuorumPeerMain</span><br><span class="line">17727 Jps</span><br></pre></td></tr></table></figure>

<h3 id="è„šæœ¬ä¸€é”®å¯åŠ¨"><a href="#è„šæœ¬ä¸€é”®å¯åŠ¨" class="headerlink" title="è„šæœ¬ä¸€é”®å¯åŠ¨"></a>è„šæœ¬ä¸€é”®å¯åŠ¨</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">vim zkServer.sh</span><br><span class="line">#!/bin/bash</span><br><span class="line">if [ $# -eq 0 ] ;</span><br><span class="line">then</span><br><span class="line">echo &quot;please input param:start stop&quot;</span><br><span class="line">else</span><br><span class="line">if [ $1 = start ] ;then</span><br><span class="line">echo &quot;$&#123;1&#125;ing master&quot;</span><br><span class="line">ssh master &quot;source /etc/profile;/export/server/zookeeper/bin/zkServer.sh</span><br><span class="line">start&quot;</span><br><span class="line">for i in &#123;1..2&#125;</span><br><span class="line">do</span><br><span class="line">echo &quot;$&#123;1&#125;ping slave$&#123;i&#125;&quot;</span><br><span class="line">ssh slave$&#123;i&#125; &quot;source</span><br><span class="line">/etc/profile;/export/server/zookeeper/bin/zkServer.sh start&quot;</span><br><span class="line">done</span><br><span class="line">fi</span><br><span class="line">if [ $1 = stop ];then</span><br><span class="line">echo &quot;$&#123;1&#125;ping master &quot;</span><br><span class="line">ssh master &quot;source /etc/profile;/export/server/zookeeper/bin/zkServer.sh</span><br><span class="line">stop&quot;</span><br><span class="line">for i in &#123;1..2&#125;</span><br><span class="line">do</span><br><span class="line">echo &quot;$&#123;1&#125;ping slave$&#123;i&#125;&quot;</span><br><span class="line">ssh slave$&#123;i&#125; &quot;source</span><br><span class="line">/etc/profile;/export/server/zookeeper/bin/zkServer.sh stop&quot;</span><br><span class="line">done</span><br><span class="line">fi</span><br><span class="line">if [ $1 = status ];then</span><br><span class="line">echo &quot;$&#123;1&#125;ing master&quot;</span><br><span class="line">ssh master &quot;source /etc/profile;/export/server/zookeeper/bin/zkServer.sh</span><br><span class="line">status&quot;</span><br><span class="line">for i in &#123;1..2&#125;</span><br><span class="line">do</span><br><span class="line">echo &quot;$&#123;1&#125;ping slave$&#123;i&#125;&quot;</span><br><span class="line">ssh slave$&#123;i&#125; &quot;source</span><br><span class="line">/etc/profile;/export/server/zookeeper/bin/zkServer.sh status&quot;</span><br><span class="line">done</span><br><span class="line">fi</span><br><span class="line">fi</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># å°†æ–‡ä»¶æ”¾åœ¨ /bin ç›®å½•ä¸‹</span><br><span class="line">chmod +x zkServer-all.sh &amp;&amp; zkServer-all.sh</span><br></pre></td></tr></table></figure>

<h2 id="Hadoop-å®‰è£…é…ç½®"><a href="#Hadoop-å®‰è£…é…ç½®" class="headerlink" title="Hadoop å®‰è£…é…ç½®"></a>Hadoop å®‰è£…é…ç½®</h2><h3 id="æŠŠ-hadoop-3-3-0-Centos7-64-with-snappy-tar-gz-ä¸Šä¼ åˆ°-x2F-export-x2F-server-å¹¶è§£å‹æ–‡ä»¶"><a href="#æŠŠ-hadoop-3-3-0-Centos7-64-with-snappy-tar-gz-ä¸Šä¼ åˆ°-x2F-export-x2F-server-å¹¶è§£å‹æ–‡ä»¶" class="headerlink" title="æŠŠ hadoop-3.3.0-Centos7-64-with-snappy.tar.gz ä¸Šä¼ åˆ° &#x2F;export&#x2F;server å¹¶è§£å‹æ–‡ä»¶"></a>æŠŠ hadoop-3.3.0-Centos7-64-with-snappy.tar.gz ä¸Šä¼ åˆ° &#x2F;export&#x2F;server å¹¶è§£å‹æ–‡ä»¶</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">æŠŠ hadoop-3.3.0-Centos7-64-with-snappy.tar.gz ä¸Šä¼ åˆ° /export/server å¹¶è§£å‹æ–‡ä»¶</span><br></pre></td></tr></table></figure>

<h3 id="ä¿®æ”¹é…ç½®æ–‡ä»¶-è¿›å…¥è·¯å¾„-x2F-export-x2F-server-x2F-hadoop-3-3-0-x2F-etc-x2F-hadoop"><a href="#ä¿®æ”¹é…ç½®æ–‡ä»¶-è¿›å…¥è·¯å¾„-x2F-export-x2F-server-x2F-hadoop-3-3-0-x2F-etc-x2F-hadoop" class="headerlink" title="ä¿®æ”¹é…ç½®æ–‡ä»¶(è¿›å…¥è·¯å¾„ &#x2F;export&#x2F;server&#x2F;hadoop-3.3.0&#x2F;etc&#x2F;hadoop)"></a>ä¿®æ”¹é…ç½®æ–‡ä»¶(è¿›å…¥è·¯å¾„ &#x2F;export&#x2F;server&#x2F;hadoop-3.3.0&#x2F;etc&#x2F;hadoop)</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd /export/server/hadoop-3.3.0/etc/hadoop</span><br></pre></td></tr></table></figure>

<p>hadoop-env.sh</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#æ–‡ä»¶æœ€åæ·»åŠ  </span><br><span class="line">export JAVA_HOME=/export/server/jdk1.8.0_241 export HDFS_NAMENODE_USER=root export HDFS_DATANODE_USER=root export HDFS_SECONDARYNAMENODE_USER=root export YARN_RESOURCEMANAGER_USER=root export YARN_NODEMANAGER_USER=root</span><br></pre></td></tr></table></figure>

<p>core-site.xml</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- è®¾ç½®é»˜è®¤ä½¿ç”¨çš„æ–‡ä»¶ç³»ç»Ÿ Hadoopæ”¯æŒfileã€HDFSã€GFSã€ali|Amazonäº‘ç­‰æ–‡ä»¶ç³»ç»Ÿ -</span><br><span class="line">-&gt;</span><br><span class="line">&lt;property&gt;</span><br><span class="line">&lt;name&gt;fs.defaultFS&lt;/name&gt;</span><br><span class="line">&lt;value&gt;hdfs://master:8020&lt;/value&gt;</span><br><span class="line">&lt;/property&gt;</span><br><span class="line">&lt;!-- è®¾ç½®Hadoopæœ¬åœ°ä¿å­˜æ•°æ®è·¯å¾„ --&gt;</span><br><span class="line">&lt;property&gt;</span><br><span class="line">&lt;name&gt;hadoop.tmp.dir&lt;/name&gt;</span><br><span class="line">&lt;value&gt;/export/data/hadoop-3.3.0&lt;/value&gt;</span><br><span class="line">&lt;/property&gt;</span><br><span class="line">&lt;!-- è®¾ç½®HDFS web UIç”¨æˆ·èº«ä»½ --&gt;</span><br><span class="line">&lt;property&gt;</span><br><span class="line">&lt;name&gt;hadoop.http.staticuser.user&lt;/name&gt;</span><br><span class="line">&lt;value&gt;root&lt;/value&gt;</span><br><span class="line">&lt;/property&gt;</span><br><span class="line">&lt;!-- æ•´åˆhive ç”¨æˆ·ä»£ç†è®¾ç½® --&gt;</span><br><span class="line">&lt;property&gt;</span><br><span class="line">&lt;name&gt;hadoop.proxyuser.root.hosts&lt;/name&gt;</span><br><span class="line">&lt;value&gt;*&lt;/value&gt;</span><br><span class="line">&lt;/property&gt;</span><br><span class="line">&lt;property&gt;</span><br><span class="line">&lt;name&gt;hadoop.proxyuser.root.groups&lt;/name&gt;</span><br><span class="line">&lt;value&gt;*&lt;/value&gt;</span><br><span class="line">&lt;/property&gt;</span><br><span class="line">&lt;!-- æ–‡ä»¶ç³»ç»Ÿåƒåœ¾æ¡¶ä¿å­˜æ—¶é—´ --&gt;</span><br><span class="line">&lt;property&gt;</span><br><span class="line">&lt;name&gt;fs.trash.interval&lt;/name&gt;</span><br><span class="line">&lt;value&gt;1440&lt;/value&gt;</span><br><span class="line">&lt;/property&gt;</span><br></pre></td></tr></table></figure>

<p>hdfs-site.xml</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- è®¾ç½®SNNè¿›ç¨‹è¿è¡Œæœºå™¨ä½ç½®ä¿¡æ¯ --&gt;</span><br><span class="line">&lt;property&gt;</span><br><span class="line">&lt;name&gt;dfs.namenode.secondary.http-address&lt;/name&gt;</span><br><span class="line">&lt;value&gt;slave1:9868&lt;/value&gt;</span><br><span class="line">&lt;/property&gt;</span><br></pre></td></tr></table></figure>

<p>mapred-site.xml</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- è®¾ç½®MRç¨‹åºé»˜è®¤è¿è¡Œæ¨¡å¼ï¼š yarné›†ç¾¤æ¨¡å¼ localæœ¬åœ°æ¨¡å¼ --&gt;</span><br><span class="line">&lt;property&gt;</span><br><span class="line">&lt;name&gt;mapreduce.framework.name&lt;/name&gt;</span><br><span class="line">&lt;value&gt;yarn&lt;/value&gt;</span><br><span class="line">&lt;/property&gt;</span><br><span class="line">&lt;!-- MRç¨‹åºå†å²æœåŠ¡åœ°å€ --&gt;</span><br><span class="line">&lt;property&gt;</span><br><span class="line">&lt;name&gt;mapreduce.jobhistory.address&lt;/name&gt;</span><br><span class="line">&lt;value&gt;master:10020&lt;/value&gt;</span><br><span class="line">&lt;/property&gt;</span><br><span class="line">&lt;!-- MRç¨‹åºå†å²æœåŠ¡å™¨webç«¯åœ°å€ --&gt;</span><br><span class="line">&lt;property&gt;</span><br><span class="line">&lt;name&gt;mapreduce.jobhistory.webapp.address&lt;/name&gt;</span><br><span class="line">&lt;value&gt;master:19888&lt;/value&gt;</span><br><span class="line">&lt;/property&gt;</span><br><span class="line">&lt;property&gt;</span><br><span class="line">&lt;name&gt;yarn.app.mapreduce.am.env&lt;/name&gt;</span><br><span class="line">&lt;value&gt;HADOOP_MAPRED_HOME=$&#123;HADOOP_HOME&#125;&lt;/value&gt;</span><br><span class="line">&lt;/property&gt;</span><br><span class="line">&lt;property&gt;</span><br><span class="line">&lt;name&gt;mapreduce.map.env&lt;/name&gt;</span><br><span class="line">&lt;value&gt;HADOOP_MAPRED_HOME=$&#123;HADOOP_HOME&#125;&lt;/value&gt;</span><br><span class="line">&lt;/property&gt;</span><br><span class="line">&lt;property&gt;</span><br><span class="line">&lt;name&gt;mapreduce.reduce.env&lt;/name&gt;</span><br><span class="line">&lt;value&gt;HADOOP_MAPRED_HOME=$&#123;HADOOP_HOME&#125;&lt;/value&gt;</span><br><span class="line">&lt;/property&gt;</span><br></pre></td></tr></table></figure>

<p>yarn-site.xml</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- è®¾ç½®YARNé›†ç¾¤ä¸»è§’è‰²è¿è¡Œæœºå™¨ä½ç½® --&gt;</span><br><span class="line">&lt;property&gt;</span><br><span class="line">&lt;name&gt;yarn.resourcemanager.hostname&lt;/name&gt;</span><br><span class="line">&lt;value&gt;master&lt;/value&gt;</span><br><span class="line">&lt;/property&gt;</span><br><span class="line">&lt;property&gt;</span><br><span class="line">&lt;name&gt;yarn.nodemanager.aux-services&lt;/name&gt;</span><br><span class="line">&lt;value&gt;mapreduce_shuffle&lt;/value&gt;</span><br><span class="line">&lt;/property&gt;</span><br><span class="line">&lt;!-- æ˜¯å¦å°†å¯¹å®¹å™¨å®æ–½ç‰©ç†å†…å­˜é™åˆ¶ --&gt;</span><br><span class="line">&lt;property&gt;</span><br><span class="line">&lt;name&gt;yarn.nodemanager.pmem-check-enabled&lt;/name&gt;</span><br><span class="line">&lt;value&gt;false&lt;/value&gt;</span><br><span class="line">&lt;/property&gt;</span><br><span class="line">&lt;!-- æ˜¯å¦å°†å¯¹å®¹å™¨å®æ–½è™šæ‹Ÿå†…å­˜é™åˆ¶ã€‚ --&gt;</span><br><span class="line">&lt;property&gt;</span><br><span class="line">&lt;name&gt;yarn.nodemanager.vmem-check-enabled&lt;/name&gt;</span><br><span class="line">&lt;value&gt;false&lt;/value&gt;</span><br><span class="line">&lt;/property&gt;</span><br><span class="line">&lt;!-- å¼€å¯æ—¥å¿—èšé›† --&gt;</span><br><span class="line">&lt;property&gt;</span><br><span class="line">&lt;name&gt;yarn.log-aggregation-enable&lt;/name&gt;</span><br><span class="line">&lt;value&gt;true&lt;/value&gt;</span><br><span class="line">&lt;/property&gt;</span><br><span class="line">&lt;!-- è®¾ç½®yarnå†å²æœåŠ¡å™¨åœ°å€ --&gt;</span><br><span class="line">&lt;property&gt;</span><br><span class="line">&lt;name&gt;yarn.log.server.url&lt;/name&gt;</span><br><span class="line">&lt;value&gt;http://master:19888/jobhistory/logs&lt;/value&gt;</span><br><span class="line">&lt;/property&gt;</span><br><span class="line">&lt;!-- å†å²æ—¥å¿—ä¿å­˜çš„æ—¶é—´ 7å¤© --&gt;</span><br><span class="line">&lt;property&gt;</span><br><span class="line">&lt;name&gt;yarn.log-aggregation.retain-seconds&lt;/name&gt;</span><br><span class="line">&lt;value&gt;604800&lt;/value&gt;</span><br><span class="line">&lt;/property&gt;</span><br></pre></td></tr></table></figure>

<p>workers</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">master</span><br><span class="line">slave1</span><br><span class="line">slave2</span><br></pre></td></tr></table></figure>

<h3 id="åˆ†å‘åŒæ­¥hadoopå®‰è£…åŒ…"><a href="#åˆ†å‘åŒæ­¥hadoopå®‰è£…åŒ…" class="headerlink" title="åˆ†å‘åŒæ­¥hadoopå®‰è£…åŒ…"></a>åˆ†å‘åŒæ­¥hadoopå®‰è£…åŒ…</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cd /export/server</span><br><span class="line">scp -r hadoop-3.3.0 root@slave1:$PWD</span><br><span class="line">scp -r hadoop-3.3.0 root@slave2:$PWD</span><br></pre></td></tr></table></figure>

<h3 id="å°†hadoopæ·»åŠ åˆ°ç¯å¢ƒå˜é‡"><a href="#å°†hadoopæ·»åŠ åˆ°ç¯å¢ƒå˜é‡" class="headerlink" title="å°†hadoopæ·»åŠ åˆ°ç¯å¢ƒå˜é‡"></a>å°†hadoopæ·»åŠ åˆ°ç¯å¢ƒå˜é‡</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/profile</span><br><span class="line">export HADOOP_HOME=/export/server/hadoop-3.3.0</span><br><span class="line">export PATH=$PATH:$HADOOP_HOME/bin:$HADOOP_HOME/sbin</span><br></pre></td></tr></table></figure>

<h3 id="é‡æ–°åŠ è½½ç¯å¢ƒå˜é‡æ–‡ä»¶-3"><a href="#é‡æ–°åŠ è½½ç¯å¢ƒå˜é‡æ–‡ä»¶-3" class="headerlink" title="é‡æ–°åŠ è½½ç¯å¢ƒå˜é‡æ–‡ä»¶"></a>é‡æ–°åŠ è½½ç¯å¢ƒå˜é‡æ–‡ä»¶</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">source /etc/profile</span><br></pre></td></tr></table></figure>

<h3 id="Hadoopé›†ç¾¤å¯åŠ¨"><a href="#Hadoopé›†ç¾¤å¯åŠ¨" class="headerlink" title="Hadoopé›†ç¾¤å¯åŠ¨"></a>Hadoopé›†ç¾¤å¯åŠ¨</h3><h4 id="æ ¼å¼åŒ–namenodeï¼ˆåªæœ‰é¦–æ¬¡å¯åŠ¨éœ€è¦æ ¼å¼åŒ–ï¼‰"><a href="#æ ¼å¼åŒ–namenodeï¼ˆåªæœ‰é¦–æ¬¡å¯åŠ¨éœ€è¦æ ¼å¼åŒ–ï¼‰" class="headerlink" title="æ ¼å¼åŒ–namenodeï¼ˆåªæœ‰é¦–æ¬¡å¯åŠ¨éœ€è¦æ ¼å¼åŒ–ï¼‰"></a>æ ¼å¼åŒ–namenodeï¼ˆåªæœ‰é¦–æ¬¡å¯åŠ¨éœ€è¦æ ¼å¼åŒ–ï¼‰</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hdfs namenode -format</span><br></pre></td></tr></table></figure>

<h4 id="è„šæœ¬ä¸€é”®å¯åŠ¨-1"><a href="#è„šæœ¬ä¸€é”®å¯åŠ¨-1" class="headerlink" title="è„šæœ¬ä¸€é”®å¯åŠ¨"></a>è„šæœ¬ä¸€é”®å¯åŠ¨</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# start-dfs.sh</span><br><span class="line">Starting namenodes on [master]</span><br><span class="line">ä¸Šä¸€æ¬¡ç™»å½•ï¼šäº” 3æœˆ 11 21:27:24 CST 2022pts/0 ä¸Š</span><br><span class="line">Starting datanodes</span><br><span class="line">ä¸Šä¸€æ¬¡ç™»å½•ï¼šäº” 3æœˆ 11 21:27:32 CST 2022pts/0 ä¸Š</span><br><span class="line">Starting secondary namenodes [slave1]</span><br><span class="line">ä¸Šä¸€æ¬¡ç™»å½•ï¼šäº” 3æœˆ 11 21:27:35 CST 2022pts/0 ä¸Š</span><br><span class="line">[root@master ~]# start-yarn.sh</span><br><span class="line">Starting resourcemanager</span><br><span class="line">ä¸Šä¸€æ¬¡ç™»å½•ï¼šäº” 3æœˆ 11 21:27:41 CST 2022pts/0 ä¸Š</span><br><span class="line">Starting nodemanagers</span><br><span class="line">ä¸Šä¸€æ¬¡ç™»å½•ï¼šäº” 3æœˆ 11 21:27:51 CST 2022pts/0 ä¸Š</span><br></pre></td></tr></table></figure>

<h4 id="å¯åŠ¨å-è¾“å…¥-jps-æŸ¥çœ‹"><a href="#å¯åŠ¨å-è¾“å…¥-jps-æŸ¥çœ‹" class="headerlink" title="å¯åŠ¨å è¾“å…¥ jps æŸ¥çœ‹"></a>å¯åŠ¨å è¾“å…¥ jps æŸ¥çœ‹</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# jps</span><br><span class="line">127729 NameNode</span><br><span class="line">127937 DataNode</span><br><span class="line">14105 Jps</span><br><span class="line">128812 NodeManager</span><br><span class="line">128591 ResourceManager</span><br><span class="line">[root@slave1 hadoop]# jps</span><br><span class="line">121889 NodeManager</span><br><span class="line">121559 SecondaryNameNode</span><br><span class="line">7014 Jps</span><br><span class="line">121369 DataNode</span><br><span class="line">[root@slave2 hadoop]# jps</span><br><span class="line">6673 Jps</span><br><span class="line">121543 NodeManager</span><br><span class="line">121098 DataNode</span><br></pre></td></tr></table></figure>

<h4 id="WEBé¡µé¢"><a href="#WEBé¡µé¢" class="headerlink" title="WEBé¡µé¢"></a>WEBé¡µé¢</h4><h4 id="HDFSé›†ç¾¤"><a href="#HDFSé›†ç¾¤" class="headerlink" title="HDFSé›†ç¾¤"></a>HDFSé›†ç¾¤</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://master:9870/</span><br></pre></td></tr></table></figure>

<h4 id="YARNé›†ç¾¤"><a href="#YARNé›†ç¾¤" class="headerlink" title="YARNé›†ç¾¤"></a>YARNé›†ç¾¤</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://master:8088/</span><br></pre></td></tr></table></figure>



<p>Author: Chen Qingtao<br>Email: <a href="mailto:&#x31;&#x35;&#49;&#52;&#51;&#x37;&#57;&#x39;&#48;&#56;&#53;&#x40;&#x71;&#113;&#x2e;&#x63;&#111;&#109;">&#x31;&#x35;&#49;&#52;&#51;&#x37;&#57;&#x39;&#48;&#56;&#53;&#x40;&#x71;&#113;&#x2e;&#x63;&#111;&#109;</a></p>

	

	

</article>






	<span class="different-posts">ğŸ“• end of posts ğŸ“•</span>


	</main>

	<footer class="footer">
	<div class="footer-content">
		
	      <div class="footer__element">
	<p>Hi there, <br />welcome to my Blog glad you found it. Have a look around, will you?</p>
</div>

	    
	      <div class="footer__element">
	<h5>Check out</h5>
	<ul class="footer-links">
		<li class="footer-links__link"><a href="/archives">Archive</a></li>
		
		  <li class="footer-links__link"><a href="/atom.xml">RSS</a></li>
	    
		<li class="footer-links__link"><a href="/about">about page</a></li>
		<li class="footer-links__link"><a href="/tags">Tags</a></li>
		<li class="footer-links__link"><a href="/categories">Categories</a></li>
	</ul>
</div>

	    

		<div class="footer-credit">
			<span>Â© 2022 John Doe | Powered by <a target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a> | Theme <a target="_blank" rel="noopener" href="https://github.com/HoverBaum/meilidu-hexo">MeiliDu</a></span>
		</div>

	</div>


</footer>



</body>

</html>
